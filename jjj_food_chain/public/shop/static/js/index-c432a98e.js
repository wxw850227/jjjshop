import{E as e,n as s,e as t,k as a,r as o,h as i,o as l,v as r}from"./element-plus-0b11a037.js";import{_ as n,A as d}from"./index-ece0f3b6.js";import p from"./Add-50e66f92.js";import u from"./Edit-ce68cfd5.js";import{aj as c,ak as m,o as h,c as _,a as g,$ as j,T as b,S as w,W as C,P as y,Q as k,a8 as v,X as f,Y as L}from"./@vue-5441e37d.js";import"./@vueuse-d256812d.js";import"./lodash-es-d1425fe7.js";import"./async-validator-cf877c1f.js";import"./@element-plus-2416ebe7.js";import"./dayjs-9faf8871.js";import"./call-bind-0c463fe3.js";import"./get-intrinsic-bac01933.js";import"./has-symbols-456daba2.js";import"./has-proto-4a87f140.js";import"./function-bind-72d06d3b.js";import"./has-885c3436.js";import"./escape-html-1935ddb3.js";import"./normalize-wheel-es-3222b0a2.js";import"./@ctrl-91de2ec7.js";import"./vue-router-e88e0a38.js";import"./pinia-f65196e0.js";import"./vue-demi-71ba0ef2.js";import"./axios-85bcd05e.js";import"./qs-942d6868.js";import"./side-channel-ba7aab8a.js";import"./object-inspect-860361a9.js";import"./vue-ueditor-wrap-026a3d0f.js";const z={class:"user"},S={class:"common-level-rail"},T={class:"product-content"},x={class:"table-wrap"},D={key:0},P={key:1,class:"gray"},A={key:0},E={key:0},V={key:0,class:"red"},I={key:1},M={key:0},N={class:"pagination"};const q=n({components:{Add:p,Edit:u},inject:["reload"],data:()=>({loading:!0,role_loading:!0,tableData:[],pageSize:20,totalDataNumber:0,curPage:1,formInline:{user:"",region:""},open_add:!1,open_edit:!1,curModel:{},roleList:[]}),created(){this.getTableList()},methods:{handleCurrentChange(e){let s=this;s.curPage=e,s.loading=!0,s.getTableList()},handleSizeChange(e){this.curPage=1,this.pageSize=e,this.getTableList()},getTableList(){let e=this,s={};s.page=e.curPage,s.list_rows=e.pageSize,d.userList(s,!0).then((s=>{e.loading=!1,e.roleList=s.data.roleList,e.tableData=s.data.list.data,e.totalDataNumber=s.data.list.total})).catch((e=>{}))},addClick(){this.open_add=!0},closeAdd(e){this.open_add=!1,e&&"success"==e.type&&this.getTableList()},editClick(e){this.curModel=e,this.open_edit=!0},closeEdit(e){this.open_edit=!1,e&&"success"==e.type&&this.getTableList()},isShowFunc(s){let t=this;d.setStatus({shop_user_id:s.shop_user_id,status:s.is_status},!0).then((s=>{1==s.code&&(e({message:s.msg,type:"success"}),t.getTableList())})).catch((e=>{t.loading=!1}))},deleteClick(t){let a=this;s.confirm("此操作将永久删除该记录, 是否继续?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then((()=>{a.loading=!0,d.userDelete({shop_user_id:t.shop_user_id},!0).then((s=>{a.loading=!1,1==s.code?(e({message:"恭喜你，该管理员删除成功",type:"success"}),a.getTableList()):a.loading=!1})).catch((e=>{a.loading=!1}))})).catch((()=>{}))}}},[["render",function(e,s,n,d,p,u){const q=t,B=a,F=o,U=i,J=l,Q=c("Add"),R=c("Edit"),W=m("auth"),X=r;return h(),_("div",z,[g("div",S,[j((h(),b(q,{size:"small",type:"primary",icon:"Plus",onClick:u.addClick},{default:w((()=>[C("添加管理员")])),_:1},8,["onClick"])),[[W,"/auth/user/add"]])]),g("div",T,[g("div",x,[j((h(),b(U,{size:"small",data:p.tableData,border:"",style:{width:"100%"}},{default:w((()=>[y(B,{prop:"shop_user_id",label:"管理员ID"}),y(B,{prop:"user_name",label:"用户名"}),y(B,{prop:"role.role_name",label:"所属角色"},{default:w((e=>[0==e.row.is_super?(h(),_("div",D,[(h(!0),_(k,null,v(e.row.userRole,((e,s)=>(h(),_("span",{class:"mr10 green",key:s},f(e.role.role_name),1)))),128))])):L("",!0),1==e.row.is_super?(h(),_("div",P,"超级管理员")):L("",!0)])),_:1}),y(B,{prop:"user_name",label:"所属门店"},{default:w((e=>[e.row.supplier?(h(),_("span",A,f(e.row.supplier.name),1)):L("",!0)])),_:1}),y(B,{prop:"user_name",label:"门店状态"},{default:w((e=>[e.row.supplier?(h(),_("div",E,[1==e.row.supplier.is_delete?(h(),_("span",V,"已删除")):(h(),_("span",I,"未删除"))])):L("",!0)])),_:1}),y(B,{prop:"is_status",label:"账号状态",width:"80"},{default:w((e=>[e.row.is_super<1||1==e.row.is_super&&1==e.row.user_type?(h(),_("div",M,[y(F,{modelValue:e.row.is_status,"onUpdate:modelValue":s=>e.row.is_status=s,"active-value":0,"inactive-value":1,onChange:s=>u.isShowFunc(e.row),"active-color":"#13ce66","inactive-color":"#cccccc"},null,8,["modelValue","onUpdate:modelValue","onChange"])])):L("",!0)])),_:1}),y(B,{prop:"create_time",label:"添加时间"}),y(B,{fixed:"right",label:"操作",width:"120"},{default:w((e=>[e.row.is_super<1?j((h(),b(q,{key:0,onClick:s=>u.editClick(e.row),type:"text",size:"small"},{default:w((()=>[C("编辑")])),_:2},1032,["onClick"])),[[W,"/auth/user/edit"]]):L("",!0),e.row.is_super<1||1==e.row.is_super&&1==e.row.user_type?j((h(),b(q,{key:1,onClick:s=>u.deleteClick(e.row),type:"text",size:"small"},{default:w((()=>[C("删除")])),_:2},1032,["onClick"])),[[W,"/auth/user/delete"]]):L("",!0)])),_:1})])),_:1},8,["data"])),[[X,p.loading]])]),g("div",N,[y(J,{onSizeChange:u.handleSizeChange,onCurrentChange:u.handleCurrentChange,background:"","current-page":p.curPage,"page-size":p.pageSize,layout:"total, prev, pager, next, jumper",total:p.totalDataNumber},null,8,["onSizeChange","onCurrentChange","current-page","page-size","total"])])]),y(Q,{open:p.open_add,roleList:p.roleList,onClose:u.closeAdd},null,8,["open","roleList","onClose"]),y(R,{open:p.open_edit,roleList:p.roleList,shop_user_id:p.curModel.shop_user_id,onClose:u.closeEdit},null,8,["open","roleList","shop_user_id","onClose"])])}]]);export{q as default};
