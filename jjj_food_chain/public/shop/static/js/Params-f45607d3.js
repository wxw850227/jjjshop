import{s as e,t,d as l,e as a,c as i,b as o,k as s,h as r,o as d,p as n,v as c,E as u}from"./element-plus-0b11a037.js";import{S as m}from"./store-c5b14aed.js";import{_ as p,d as h}from"./index-7abb690d.js";import{o as g,T as f,S as y,a as I,P as b,W as C,c as _,Q as v,a8 as k,Y as x,$ as S,aj as j}from"./@vue-5441e37d.js";import{_ as w}from"./Upload-bc443e94.js";import z from"./Setpages-4934a7c6.js";import V from"./Banner-b189708e.js";import D from"./Window-c9b23084.js";import P from"./NavBar-5f4724f0.js";import L from"./adNav-be569549.js";import F from"./Blank-1900548d.js";import N from"./Guide-54d60c2f.js";import{P as E}from"./product-27fdf87b.js";import"./@vueuse-d256812d.js";import"./lodash-es-d1425fe7.js";import"./async-validator-cf877c1f.js";import"./@element-plus-2416ebe7.js";import"./dayjs-9faf8871.js";import"./call-bind-0c463fe3.js";import"./get-intrinsic-bac01933.js";import"./has-symbols-456daba2.js";import"./has-proto-4a87f140.js";import"./function-bind-72d06d3b.js";import"./has-885c3436.js";import"./escape-html-1935ddb3.js";import"./normalize-wheel-es-3222b0a2.js";import"./@ctrl-91de2ec7.js";import"./vue-router-e88e0a38.js";import"./pinia-f65196e0.js";import"./vue-demi-71ba0ef2.js";import"./axios-85bcd05e.js";import"./qs-942d6868.js";import"./side-channel-ba7aab8a.js";import"./object-inspect-860361a9.js";import"./vue-ueditor-wrap-026a3d0f.js";import"./Setlink-fdaac225.js";import"./vuedraggable-fa449dda.js";import"./vue-ffc0216e.js";import"./sortablejs-88eb33dd.js";const B={class:"common-seach-wrap"},U={class:"product-content"},W={class:"table-wrap"},M=["src"],$={class:"pagination"},G={class:"dialog-footer"};const R=p({data:()=>({loading:!0,curPage:1,pageSize:20,totalDataNumber:0,formInline:{},cateList:[],productList:[],status:[{id:10,name:"上架"},{id:20,name:"下架"}],multipleSelection:[],formLabelWidth:"120px",dialogVisible:!1,type:"error",params:null}),props:["isstore","excludeIds","islist"],watch:{isstore:function(e,t){e!=t&&e&&(this.dialogVisible=e,this.type="error",this.params=null,this.getData())}},created(){},methods:{selectableFunc:e=>"boolean"!=typeof e.noChoose||e.noChoose,handleCurrentChange(e){this.curPage=e,this.getData()},handleSizeChange(e){this.curPage=1,this.pageSize=e,this.getData()},getData(){let e=this,t=e.formInline;t.page=e.curPage,t.list_rows=e.pageSize,m.storeLists(t,!0).then((t=>{1==t.code&&(e.loading=!1,e.cateList=t.data.catgory,e.excludeIds&&void 0!==e.excludeIds&&e.excludeIds.length>0&&t.data.list.data.forEach((t=>{e.excludeIds.indexOf(t.product_id)>-1?t.noChoose=!1:t.noChoose=!0})),e.productList=t.data.list.data,e.totalDataNumber=t.data.list.total)})).catch((e=>{}))},addClerk(){let e=this,t=null;e.multipleSelection.length<1?e.$message({message:"请至少选择一件产品商品！",type:"error"}):(e.islist&&void 0!==e.islist?(e.multipleSelection.forEach((e=>{e.image=e.image[0].file_path})),t=e.multipleSelection):(t=e.multipleSelection[0],t.image=t.image[0].file_path),e.params=t,e.type="success",e.dialogVisible=!1)},dialogFormVisible(){this.$emit("closeDialog",{type:this.type,openDialog:!1,params:this.params})},tableCurrentChange(e){this.multipleSelection=e}}},[["render",function(u,m,p,h,j,w){const z=e,V=t,D=l,P=a,L=i,F=o,N=s,E=r,R=d,q=n,O=c;return g(),f(q,{title:"选择门店",modelValue:j.dialogVisible,"onUpdate:modelValue":m[3]||(m[3]=e=>j.dialogVisible=e),onClose:w.dialogFormVisible,"close-on-click-modal":!1,"close-on-press-escape":!1,width:"900px"},{footer:y((()=>[I("div",G,[b(P,{size:"small",onClick:m[2]||(m[2]=e=>j.dialogVisible=!1)},{default:y((()=>[C("取 消")])),_:1}),b(P,{size:"small",type:"primary",onClick:w.addClerk},{default:y((()=>[C("确 定")])),_:1},8,["onClick"])])])),default:y((()=>[I("div",B,[b(F,{inline:!0,size:"small",model:j.formInline,class:"demo-form-inline"},{default:y((()=>[b(D,{label:"商品分类"},{default:y((()=>[b(V,{modelValue:j.formInline.category_id,"onUpdate:modelValue":m[0]||(m[0]=e=>j.formInline.category_id=e),placeholder:"请选择商品分类"},{default:y((()=>[(g(!0),_(v,null,k(j.cateList,(e=>(g(),_(v,{key:e.category_id},[b(z,{value:0,label:"全部"}),b(z,{value:e.category_id,label:e.name},null,8,["value","label"]),(g(!0),_(v,null,k(e.child,(t=>(g(),_(v,{key:t.category_id},[void 0!==e.child?(g(),_(v,{key:0},[b(z,{value:t.category_id,label:t.name,style:{"padding-left":"30px"}},null,8,["value","label"]),void 0!==t.child?(g(!0),_(v,{key:0},k(t.child,(e=>(g(),f(z,{key:e.category_id,value:e.category_id,label:e.name,style:{"padding-left":"60px"}},null,8,["value","label"])))),128)):x("",!0)],64)):x("",!0)],64)))),128))],64)))),128))])),_:1},8,["modelValue"])])),_:1}),b(D,{label:"商品名称"},{default:y((()=>[b(L,{placeholder:"请输入商品名称",modelValue:j.formInline.search,"onUpdate:modelValue":m[1]||(m[1]=e=>j.formInline.search=e)},{default:y((()=>[b(P,{icon:"el-icon-search",onClick:w.getData},{default:y((()=>[C("查询")])),_:1},8,["onClick"])])),_:1},8,["modelValue"])])),_:1})])),_:1},8,["model"])]),I("div",U,[I("div",W,[S((g(),f(E,{size:"small",data:j.productList,border:"",style:{width:"100%"},"highlight-current-row":"",onSelectionChange:w.tableCurrentChange},{default:y((()=>[b(N,{width:"70",label:"商品图片"},{default:y((e=>[I("img",{src:e.row.image&&e.row.image[0]&&e.row.image[0].file_path,width:30,height:30},null,8,M)])),_:1}),b(N,{prop:"product_name",label:"商品名称"}),b(N,{prop:"category.name",width:"100",label:"商品分类"}),b(N,{prop:"create_time",width:"140",label:"添加时间"}),b(N,{type:"selection",selectable:w.selectableFunc,width:"44"},null,8,["selectable"])])),_:1},8,["data","onSelectionChange"])),[[O,j.loading]])]),I("div",$,[b(R,{onSizeChange:w.handleSizeChange,onCurrentChange:w.handleCurrentChange,background:"","current-page":j.curPage,"page-sizes":[2,10,20,50,100],"page-size":j.pageSize,layout:"total, prev, pager, next, jumper",total:j.totalDataNumber},null,8,["onSizeChange","onCurrentChange","current-page","page-size","total"])])])])),_:1},8,["modelValue","onClose"])}]]),q={class:"common-seach-wrap"},O={class:"product-content"},A={class:"table-wrap"},J=["src"],K={class:"pagination"},Q={class:"dialog-footer"};const T={id:"diy-editor",ref:"diy-editor",class:"diy-editor form-horizontal"};const Y=p({components:{SetpagesIndex:z,Banner:V,Window:D,NavBar:P,Blank:F,Guide:N,Upload:w,ProductSelect:p({data:()=>({loading:!0,curPage:1,pageSize:20,totalDataNumber:0,formInline:{category_id:0,search:""},cateList:[],productList:[],status:[{id:10,name:"上架"},{id:20,name:"下架"}],multipleSelection:[],formLabelWidth:"120px",dialogVisible:!1,type:"error",params:null}),props:["isproduct","excludeIds","islist","spec_type","product_type"],watch:{isproduct:function(e,t){e!=t&&e&&(this.dialogVisible=e,this.type="error",this.params=null,this.getData())}},created(){},methods:{selectableFunc:e=>"boolean"!=typeof e.noChoose||e.noChoose,handleCurrentChange(e){this.curPage=e,this.getData()},handleSizeChange(e){this.curPage=1,this.pageSize=e,this.getData()},getData(){let e=this,t=e.formInline;t.page=e.curPage,t.list_rows=e.pageSize,t.spec_type=e.spec_type;let l=function(t){1==t.code&&(e.loading=!1,e.cateList=t.data.category,e.excludeIds&&void 0!==e.excludeIds&&e.excludeIds.length>0?t.data.list.data.forEach((t=>{e.excludeIds.indexOf(t.product_id)>-1?t.noChoose=!1:t.noChoose=!0})):e.islist||t.data.list.data.forEach((e=>{e.noChoose=!0})),e.productList=t.data.list.data,e.totalDataNumber=t.data.list.total)};0==e.product_type?E.takeProductList(t,!0).then((e=>{l(e)})):E.storeProductList(t,!0).then((e=>{l(e)}))},SingleFunc(e){this.multipleSelection=[e],this.addClerk()},addClerk(){let e=this,t=null;e.multipleSelection.length<1?e.$message({message:"请至少选择一件产品商品！",type:"error"}):(e.islist&&void 0!==e.islist?(e.multipleSelection.forEach((e=>{e.image=e.image[0].file_path})),t=e.multipleSelection):(t=e.multipleSelection[0],t.image=t.image[0].file_path),e.params=t,e.type="success",e.dialogVisible=!1)},dialogFormVisible(){this.formInline.category_id=0,this.formInline.search="",this.$emit("closeDialog",{type:this.type,openDialog:!1,params:this.params})},tableCurrentChange(e){this.multipleSelection=e}}},[["render",function(u,m,p,h,j,w){const z=e,V=t,D=l,P=a,L=i,F=o,N=s,E=r,B=d,U=n,W=c;return g(),f(U,{title:"选择商品",modelValue:j.dialogVisible,"onUpdate:modelValue":m[3]||(m[3]=e=>j.dialogVisible=e),onClose:w.dialogFormVisible,"close-on-click-modal":!1,"close-on-press-escape":!1,width:"900px"},{footer:y((()=>[I("div",Q,[b(P,{size:"small",onClick:m[2]||(m[2]=e=>j.dialogVisible=!1)},{default:y((()=>[C("取 消")])),_:1}),p.islist?(g(),f(P,{key:0,size:"small",type:"primary",onClick:w.addClerk},{default:y((()=>[C("确 定")])),_:1},8,["onClick"])):x("",!0)])])),default:y((()=>[I("div",q,[b(F,{inline:!0,size:"small",model:j.formInline,class:"demo-form-inline"},{default:y((()=>[b(D,{label:"商品分类"},{default:y((()=>[b(V,{modelValue:j.formInline.category_id,"onUpdate:modelValue":m[0]||(m[0]=e=>j.formInline.category_id=e),placeholder:"请选择商品分类"},{default:y((()=>[b(z,{value:0,label:"全部"}),(g(!0),_(v,null,k(j.cateList,(e=>(g(),_(v,{key:e.category_id},[b(z,{value:e.category_id,label:e.name},null,8,["value","label"]),(g(!0),_(v,null,k(e.child,(t=>(g(),_(v,{key:t.category_id},[void 0!==e.child?(g(),_(v,{key:0},[b(z,{value:t.category_id,label:t.name,style:{"padding-left":"30px"}},null,8,["value","label"]),(g(!0),_(v,null,k(t.child,(e=>(g(),_(v,{key:e.category_id},[void 0!==t.child?(g(),f(z,{key:0,value:e.category_id,label:e.name,style:{"padding-left":"60px"}},null,8,["value","label"])):x("",!0)],64)))),128))],64)):x("",!0)],64)))),128))],64)))),128))])),_:1},8,["modelValue"])])),_:1}),b(D,{label:"商品名称"},{default:y((()=>[b(L,{placeholder:"请输入商品名称",modelValue:j.formInline.search,"onUpdate:modelValue":m[1]||(m[1]=e=>j.formInline.search=e)},{append:y((()=>[b(P,{icon:"Search",onClick:w.getData},{default:y((()=>[C(" 查询 ")])),_:1},8,["onClick"])])),_:1},8,["modelValue"])])),_:1})])),_:1},8,["model"])]),I("div",O,[I("div",A,[S((g(),f(E,{size:"small",data:j.productList,border:"",style:{width:"100%"},"highlight-current-row":"",onSelectionChange:w.tableCurrentChange},{default:y((()=>[b(N,{width:"70",label:"商品图片"},{default:y((e=>[I("img",{src:e.row.image&&e.row.image[0]&&e.row.image[0].file_path,width:30,height:30},null,8,J)])),_:1}),b(N,{prop:"product_name",label:"商品名称"}),b(N,{prop:"category.name",width:"100",label:"商品分类"}),b(N,{prop:"create_time",width:"140",label:"添加时间"}),p.islist?(g(),f(N,{key:0,type:"selection",selectable:w.selectableFunc,width:"44"},null,8,["selectable"])):x("",!0),p.islist?x("",!0):(g(),f(N,{key:1,width:"80",label:"单选"},{default:y((e=>[e.row.noChoose?(g(),f(P,{key:0,size:"mini",onClick:t=>w.SingleFunc(e.row)},{default:y((()=>[C("选择")])),_:2},1032,["onClick"])):(g(),f(P,{key:1,size:"mini",disabled:""},{default:y((()=>[C("已选")])),_:1}))])),_:1}))])),_:1},8,["data","onSelectionChange"])),[[W,j.loading]])]),I("div",K,[b(B,{onSizeChange:w.handleSizeChange,onCurrentChange:w.handleCurrentChange,background:"","current-page":j.curPage,"page-sizes":[2,10,20,50,100],"page-size":j.pageSize,layout:"total, prev, pager, next, jumper",total:j.totalDataNumber},null,8,["onSizeChange","onCurrentChange","current-page","page-size","total"])])])])),_:1},8,["modelValue","onClose"])}]]),StoreSelect:R,adNav:L},data:()=>({isupload:!1,imgModel:null,isproduct:!1,excludeIds:[],islist:!1,isstore:!1,isstorelist:!1}),props:["form","defaultData","diyData","opts"],created(){},methods:{onEditorAddData:function(){let e=this;var t=h(e.defaultData[e.form.curItem.type].data[0]);e.form.curItem.data.push(t)},onEditorResetColor:function(e,t,l){e[t].titleBackgroundColor=l},onEditorDeleleData:function(e,t){if(this.diyData.items[t].data.length<=1)return u({message:"至少保留一个",type:"error"}),!1;this.diyData.items[t].data.splice(e,1)},onEditorSelectImage:function(e,t){this.isupload=!0,this.imgModel={index:e,imgUrl:t}},returnImgsFunc(e){null!=e&&(this.imgModel.index[this.imgModel.imgUrl]=e[0].file_path),this.isupload=!1},openProduct(e,t){let l=[];e.forEach((e=>{l.push(e.product_id)})),this.excludeIds=l,this.islist=!(!t||void 0===t),this.isproduct=!0},closeProductDialogFunc(e){null!=this.form.curItem&&(this.isproduct=!1,"success"==e.type&&(this.islist?this.form.curItem.data=this.form.curItem.data.concat(e.params):this.form.curItem.data.push(e.params)))},openStore(e,t){let l=[];e.forEach((e=>{l.push(e.store_id)})),this.excludeIds=l,this.isstorelist=!(!t||void 0===t),this.isstore=!0}}},[["render",function(e,t,l,a,i,o){const s=j("SetpagesIndex"),r=j("Banner"),d=j("Window"),n=j("NavBar"),c=j("adNav"),u=j("Blank"),m=j("Guide"),p=w,h=j("ProductSelect"),I=R;return g(),_("div",T,[l.form.curItem?(g(),_(v,{key:0},["page"==l.form.curItem.type?(g(),f(s,{key:0,curItem:l.form.curItem},null,8,["curItem"])):x("",!0),"banner"==l.form.curItem.type?(g(),f(r,{key:1,curItem:l.form.curItem,selectedIndex:l.form.selectedIndex},null,8,["curItem","selectedIndex"])):x("",!0),"window"==l.form.curItem.type?(g(),f(d,{key:2,curItem:l.form.curItem,selectedIndex:l.form.selectedIndex},null,8,["curItem","selectedIndex"])):x("",!0),"navBar"==l.form.curItem.type?(g(),f(n,{key:3,curItem:l.form.curItem,selectedIndex:l.form.selectedIndex},null,8,["curItem","selectedIndex"])):x("",!0),"adNav"==l.form.curItem.type?(g(),f(c,{key:4,curItem:l.form.curItem,selectedIndex:l.form.selectedIndex},null,8,["curItem","selectedIndex"])):x("",!0),"blank"==l.form.curItem.type?(g(),f(u,{key:5,curItem:l.form.curItem,selectedIndex:l.form.selectedIndex},null,8,["curItem","selectedIndex"])):x("",!0),"guide"==l.form.curItem.type?(g(),f(m,{key:6,curItem:l.form.curItem,selectedIndex:l.form.selectedIndex},null,8,["curItem","selectedIndex"])):x("",!0)],64)):x("",!0),i.isupload?(g(),f(p,{key:1,isupload:i.isupload,config:{total:3},onReturnImgs:o.returnImgsFunc},null,8,["isupload","onReturnImgs"])):x("",!0),b(h,{isproduct:i.isproduct,excludeIds:i.excludeIds,islist:i.islist,onCloseDialog:t[0]||(t[0]=e=>o.closeProductDialogFunc(e))},{default:y((()=>[C("产品列表弹出层")])),_:1},8,["isproduct","excludeIds","islist"]),b(I,{isstore:i.isstore,islist:i.isstorelist},null,8,["isstore","islist"])],512)}],["__scopeId","data-v-415fb470"]]);export{Y as default};
