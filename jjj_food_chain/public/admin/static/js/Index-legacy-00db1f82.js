System.register(["./element-plus-legacy-ca45a429.js","./request-legacy-a88be576.js","./index-legacy-864f8876.js","./@vue-legacy-3f894b11.js","./@vueuse-legacy-1d581b9a.js","./lodash-es-legacy-74aa31b9.js","./async-validator-legacy-aa1fd2de.js","./dayjs-legacy-487f011d.js","./call-bind-legacy-19c53985.js","./get-intrinsic-legacy-ae4be0ce.js","./has-symbols-legacy-afcc0593.js","./has-proto-legacy-d280ab1e.js","./function-bind-legacy-b76e1749.js","./has-legacy-06d86c07.js","./@element-plus-legacy-40a48038.js","./escape-html-legacy-ae962a8c.js","./normalize-wheel-es-legacy-13d39621.js","./@ctrl-legacy-33dbca08.js","./axios-legacy-40880ebd.js","./qs-legacy-d5e48ba4.js","./side-channel-legacy-9c6ee708.js","./object-inspect-legacy-a2c406c5.js","./vue-router-legacy-e1dde10d.js","./pinia-legacy-6a4dd62f.js","./vue-demi-legacy-97cfbb01.js"],(function(e,a){"use strict";var t,l,n,o,i,r,u,d,s,c,f,m,h,p,b,_,g,V,w,D,y,k,v,C,L,j,U,S,W,x;return{setters:[function(e){t=e.f,l=e.b,n=e.c,o=e.g,i=e.h,r=e.i,u=e.a,d=e.d,s=e.j,c=e.e,f=e.k,m=e.v,h=e.l,p=e.m,b=e.n},function(e){_=e.r},function(e){g=e._,V=e.d,w=e.f},function(e){D=e.o,y=e.S,k=e.R,v=e.a,C=e.O,L=e.V,j=e.X,U=e.c,S=e._,W=e.ad,x=e.W},null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null],execute:function(){var a=function(e,a){return _._post("/admin/Access/index",e,a)},F=function(e,a){return _._post("/admin/Access/add",e,a)},M=function(e,a){return _._post("/admin/Access/edit",e,a)},P=function(e,a){return _._post("/admin/Access/delete",e,a)},A=function(e,a){return _._post("/admin/Access/status",e,a)},q={data:function(){return{loading:!1,formData:{name:"",path:"",views:"",alias:"",icon:"",is_menu:1,is_route:1,is_show:0,sort:1,parent_id:0},formRules:{name:[{required:!0,message:"请输入菜单名称",trigger:"blur"}],path:[{required:!0,message:"请输入路径",trigger:"blur"}],views:[{required:!0,message:"请输入组件名称",trigger:"blur"}],alias:[{required:!0,message:"请输入别名",trigger:"blur"}]},parentsVal:[],accessList:[],srot:"1",formLabelWidth:"120px",dialogVisible:!1,propsParam:{label:"name",value:"access_id",checkStrictly:!0}}},props:{open_edit:Boolean,add_type:String,rawData:Array,selectModel:Object},created:function(){this.dialogVisible=this.open_edit,this.accessList=V(this.rawData),this.accessList.unshift({name:"顶级菜单",access_id:0}),this.formData=V(this.selectModel),this.findParentsID(this.accessList)},methods:{handleChange:function(e){},findParentsID:function(e){for(var a=!1,t=0;t<e.length;t++){var l=e[t];if(l.access_id==this.formData.parent_id){this.parentsVal.unshift(l.access_id),a=!0;break}var n=l.children;if(void 0!==n&&n.length>0&&this.findParentsID(n)){this.parentsVal.unshift(l.access_id),a=!0;break}}return a},onSubmit:function(){var e=this,a=e.formData;e.parentsVal.length>0&&(a.parent_id=e.parentsVal[e.parentsVal.length-1]),e.$refs.form.validate((function(l){l&&(e.loading=!0,M(a,!0).then((function(l){1==l.code&&(t({message:l.msg,type:"success"}),e.$emit("closeDialog",{type:"success",openDialog:!1,data:a}),e.loading=!1)})).catch((function(a){e.loading=!1})))}))},dialogFormVisible:function(e){this.$emit("closeDialog",{type:"error",openDialog:!1})}}},z=v("p",null,"提示：对应前端给的文件路径，例如：index/index",-1),T=v("p",null,"提示：请选择系统提供的图标",-1),I={class:"dialog-footer"},$=g(q,[["render",function(e,a,t,c,f,m){var h=l,p=n,b=o,_=i,g=r,V=u,w=d,U=s;return D(),y(U,{title:"修改菜单&权限",modelValue:f.dialogVisible,"onUpdate:modelValue":a[11]||(a[11]=function(e){return f.dialogVisible=e}),onClose:m.dialogFormVisible,"close-on-click-modal":!1,"close-on-press-escape":!1},{footer:k((function(){return[v("div",I,[C(w,{onClick:m.dialogFormVisible},{default:k((function(){return[L("取 消")]})),_:1},8,["onClick"]),C(w,{type:"primary",onClick:a[10]||(a[10]=function(e){return m.onSubmit()}),disabled:f.loading},{default:k((function(){return[L("确 定")]})),_:1},8,["disabled"])])]})),default:k((function(){return[C(V,{size:"small",model:f.formData,rules:f.formRules,ref:"form"},{default:k((function(){return[C(p,{label:"菜单名称",prop:"name","label-width":f.formLabelWidth},{default:k((function(){return[C(h,{modelValue:f.formData.name,"onUpdate:modelValue":a[0]||(a[0]=function(e){return f.formData.name=e}),autocomplete:"off",placeholder:"请输入菜单名称"},null,8,["modelValue"])]})),_:1},8,["label-width"]),C(p,{label:"类型",prop:"name","label-width":f.formLabelWidth},{default:k((function(){return[C(_,{modelValue:f.formData.is_route,"onUpdate:modelValue":a[1]||(a[1]=function(e){return f.formData.is_route=e})},{default:k((function(){return[C(b,{label:1},{default:k((function(){return[L("页面")]})),_:1}),C(b,{label:0},{default:k((function(){return[L("按钮")]})),_:1}),C(b,{label:2},{default:k((function(){return[L("独立单页面")]})),_:1})]})),_:1},8,["modelValue"])]})),_:1},8,["label-width"]),C(p,{label:"上级菜单",prop:"parent_id","label-width":f.formLabelWidth},{default:k((function(){return[C(g,{size:"small",modelValue:f.parentsVal,"onUpdate:modelValue":a[2]||(a[2]=function(e){return f.parentsVal=e}),options:f.accessList,props:f.propsParam,onChange:m.handleChange},null,8,["modelValue","options","props","onChange"])]})),_:1},8,["label-width"]),C(p,{label:"路径",prop:"path","label-width":f.formLabelWidth},{default:k((function(){return[C(h,{modelValue:f.formData.path,"onUpdate:modelValue":a[3]||(a[3]=function(e){return f.formData.path=e}),autocomplete:"off",placeholder:"请输入组件文件路径",disabled:"/plus"==f.formData.path},null,8,["modelValue","disabled"]),z]})),_:1},8,["label-width"]),C(p,{label:"图标","label-width":f.formLabelWidth},{default:k((function(){return[C(h,{modelValue:f.formData.icon,"onUpdate:modelValue":a[4]||(a[4]=function(e){return f.formData.icon=e}),autocomplete:"off",placeholder:"请输入icon"},null,8,["modelValue"]),T]})),_:1},8,["label-width"]),1==f.formData.is_route?(D(),y(p,{key:0,label:"是否是菜单","label-width":f.formLabelWidth},{default:k((function(){return[C(_,{modelValue:f.formData.is_menu,"onUpdate:modelValue":a[5]||(a[5]=function(e){return f.formData.is_menu=e})},{default:k((function(){return[C(b,{label:1},{default:k((function(){return[L("是")]})),_:1}),C(b,{label:0},{default:k((function(){return[L("否")]})),_:1})]})),_:1},8,["modelValue"])]})),_:1},8,["label-width"])):j("",!0),C(p,{label:"是否显示","label-width":f.formLabelWidth},{default:k((function(){return[C(_,{modelValue:f.formData.is_show,"onUpdate:modelValue":a[6]||(a[6]=function(e){return f.formData.is_show=e})},{default:k((function(){return[C(b,{label:1},{default:k((function(){return[L("是")]})),_:1}),C(b,{label:0},{default:k((function(){return[L("否")]})),_:1})]})),_:1},8,["modelValue"])]})),_:1},8,["label-width"]),1==f.formData.is_route?(D(),y(p,{key:1,label:"重定向","label-width":f.formLabelWidth},{default:k((function(){return[C(h,{modelValue:f.formData.redirect_name,"onUpdate:modelValue":a[7]||(a[7]=function(e){return f.formData.redirect_name=e}),autocomplete:"off",placeholder:"请输入重定向地址"},null,8,["modelValue"])]})),_:1},8,["label-width"])):j("",!0),C(p,{label:"备注",prop:"sort","label-width":f.formLabelWidth},{default:k((function(){return[C(h,{modelValue:f.formData.remark,"onUpdate:modelValue":a[8]||(a[8]=function(e){return f.formData.remark=e}),placeholder:"请输入备注",type:"textarea"},null,8,["modelValue"])]})),_:1},8,["label-width"]),C(p,{label:"排序",prop:"sort","label-width":f.formLabelWidth},{default:k((function(){return[C(h,{modelValue:f.formData.sort,"onUpdate:modelValue":a[9]||(a[9]=function(e){return f.formData.sort=e}),placeholder:"请输入排序",type:"number"},null,8,["modelValue"])]})),_:1},8,["label-width"])]})),_:1},8,["model","rules"])]})),_:1},8,["modelValue","onClose"])}]]),R={data:function(){return{loading:!1,formData:{name:"",path:"",views:"",alias:"",icon:"",is_menu:0,is_route:1,is_show:1,sort:1,parent_id:0},formRules:{name:[{required:!0,message:"请输入菜单名称",trigger:"blur"}],path:[{required:!0,message:"请输入路径",trigger:"blur"}],views:[{required:!0,message:"请输入组件名称",trigger:"blur"}],alias:[{required:!0,message:"请输入别名",trigger:"blur"}]},parentsVal:[],accessList:[],srot:"1",formLabelWidth:"120px",dialogVisible:!1,propsParam:{label:"name",value:"access_id",checkStrictly:!0}}},props:{open_add:Boolean,add_type:String,rawData:Array,selectModel:Object},created:function(){this.dialogVisible=this.open_add,this.accessList=V(this.rawData),this.accessList.unshift({name:"顶级菜单",access_id:0}),"copy"==this.add_type?(this.formData=w(this.formData,this.selectModel),this.findParentsID(this.accessList)):"child"==this.add_type&&(this.formData.parent_id=this.selectModel.access_id,this.findParentsID(this.accessList))},methods:{handleChange:function(e){},findParentsID:function(e){for(var a=!1,t=0;t<e.length;t++){var l=e[t];if(l.access_id==this.formData.parent_id){this.parentsVal.unshift(l.access_id),a=!0;break}var n=l.children;if(void 0!==n&&n.length>0&&this.findParentsID(n)){this.parentsVal.unshift(l.access_id),a=!0;break}}return a},onSubmit:function(){var e=this,a=this.formData;e.parentsVal.length>0&&(a.parent_id=e.parentsVal[e.parentsVal.length-1]),e.$refs.form.validate((function(l){l&&(e.loading=!0,F(a,!0).then((function(a){1==a.code&&(t({message:a.msg,type:"success"}),e.dialogFormVisible(!0),e.loading=!1)})).catch((function(a){e.loading=!1})))}))},dialogFormVisible:function(e){e?this.$emit("closeDialog",{type:"success",openDialog:!1}):this.$emit("closeDialog",{type:"error",openDialog:!1})}}},B=v("p",null,"提示：对应前端给的文件路径，例如：/index/index",-1),E=v("p",null,"提示：请选择系统提供的图标",-1),O={class:"dialog-footer"},X={class:"product"},G={class:"common-level-rail d-b-c"},H={class:"product-content"},J={class:"table-wrap"},K={key:0,class:"fb red f18"},N={key:1},Q={key:0},Y={key:1},Z={key:2};e("default",g({components:{Edit:$,Add:g(R,[["render",function(e,a,t,c,f,m){var h=l,p=n,b=o,_=i,g=r,V=u,w=d,U=s;return D(),y(U,{title:"添加菜单&权限",modelValue:f.dialogVisible,"onUpdate:modelValue":a[11]||(a[11]=function(e){return f.dialogVisible=e}),onClose:m.dialogFormVisible,"close-on-click-modal":!1,"close-on-press-escape":!1},{footer:k((function(){return[v("div",O,[C(w,{onClick:m.dialogFormVisible},{default:k((function(){return[L("取 消")]})),_:1},8,["onClick"]),C(w,{type:"primary",onClick:a[10]||(a[10]=function(e){return m.onSubmit()}),disabled:f.loading},{default:k((function(){return[L("确 定")]})),_:1},8,["disabled"])])]})),default:k((function(){return[C(V,{size:"small",model:f.formData,rules:f.formRules,ref:"form"},{default:k((function(){return[C(p,{label:"菜单名称",prop:"name","label-width":f.formLabelWidth},{default:k((function(){return[C(h,{modelValue:f.formData.name,"onUpdate:modelValue":a[0]||(a[0]=function(e){return f.formData.name=e}),autocomplete:"off",placeholder:"请输入菜单名称"},null,8,["modelValue"])]})),_:1},8,["label-width"]),C(p,{label:"类型",prop:"name","label-width":f.formLabelWidth},{default:k((function(){return[C(_,{modelValue:f.formData.is_route,"onUpdate:modelValue":a[1]||(a[1]=function(e){return f.formData.is_route=e})},{default:k((function(){return[C(b,{label:1},{default:k((function(){return[L("页面")]})),_:1}),C(b,{label:0},{default:k((function(){return[L("按钮")]})),_:1}),C(b,{label:2},{default:k((function(){return[L("独立单页面")]})),_:1})]})),_:1},8,["modelValue"])]})),_:1},8,["label-width"]),C(p,{label:"上级菜单",prop:"parent_id","label-width":f.formLabelWidth},{default:k((function(){return[C(g,{size:"small",modelValue:f.parentsVal,"onUpdate:modelValue":a[2]||(a[2]=function(e){return f.parentsVal=e}),options:f.accessList,props:f.propsParam,onChange:m.handleChange},null,8,["modelValue","options","props","onChange"])]})),_:1},8,["label-width"]),C(p,{label:"路径",prop:"path","label-width":f.formLabelWidth},{default:k((function(){return[C(h,{modelValue:f.formData.path,"onUpdate:modelValue":a[3]||(a[3]=function(e){return f.formData.path=e}),autocomplete:"off",placeholder:"请输入组件文件路径"},null,8,["modelValue"]),B]})),_:1},8,["label-width"]),C(p,{label:"图标","label-width":f.formLabelWidth},{default:k((function(){return[C(h,{modelValue:f.formData.icon,"onUpdate:modelValue":a[4]||(a[4]=function(e){return f.formData.icon=e}),autocomplete:"off",placeholder:"请输入icon"},null,8,["modelValue"]),E]})),_:1},8,["label-width"]),1==f.formData.is_route?(D(),y(p,{key:0,label:"是否是菜单","label-width":f.formLabelWidth},{default:k((function(){return[C(_,{modelValue:f.formData.is_menu,"onUpdate:modelValue":a[5]||(a[5]=function(e){return f.formData.is_menu=e})},{default:k((function(){return[C(b,{label:1},{default:k((function(){return[L("是")]})),_:1}),C(b,{label:0},{default:k((function(){return[L("否")]})),_:1})]})),_:1},8,["modelValue"])]})),_:1},8,["label-width"])):j("",!0),C(p,{label:"是否显示","label-width":f.formLabelWidth},{default:k((function(){return[C(_,{modelValue:f.formData.is_show,"onUpdate:modelValue":a[6]||(a[6]=function(e){return f.formData.is_show=e})},{default:k((function(){return[C(b,{label:1},{default:k((function(){return[L("是")]})),_:1}),C(b,{label:0},{default:k((function(){return[L("否")]})),_:1})]})),_:1},8,["modelValue"])]})),_:1},8,["label-width"]),1==f.formData.is_route?(D(),y(p,{key:1,label:"重定向","label-width":f.formLabelWidth},{default:k((function(){return[C(h,{modelValue:f.formData.redirect_name,"onUpdate:modelValue":a[7]||(a[7]=function(e){return f.formData.redirect_name=e}),autocomplete:"off",placeholder:"请输入重定向地址"},null,8,["modelValue"])]})),_:1},8,["label-width"])):j("",!0),C(p,{label:"备注",prop:"sort","label-width":f.formLabelWidth},{default:k((function(){return[C(h,{modelValue:f.formData.remark,"onUpdate:modelValue":a[8]||(a[8]=function(e){return f.formData.remark=e}),placeholder:"请输入备注",type:"textarea"},null,8,["modelValue"])]})),_:1},8,["label-width"]),C(p,{label:"排序",prop:"sort","label-width":f.formLabelWidth},{default:k((function(){return[C(h,{modelValue:f.formData.sort,"onUpdate:modelValue":a[9]||(a[9]=function(e){return f.formData.sort=e}),placeholder:"请输入排序",type:"number"},null,8,["modelValue"])]})),_:1},8,["label-width"])]})),_:1},8,["model","rules"])]})),_:1},8,["modelValue","onClose"])}]])},data:function(){return{loading:!0,formSearch:{is_menu:!1,pack_up:!1},rawData:[],tableData:[],open_add:!1,add_type:"",selectModel:{},open_edit:!1,userModel:{}}},created:function(){this.getTableList()},methods:{changeIsMenuFunc:function(e){var a=V(this.rawData);e?(this.showScreen(a,1),this.tableData=a):this.tableData=a},isShowFunc:function(e){var a=this;A({access_id:e.access_id,status:e.is_show},!0).then((function(e){1==e.code&&(t({message:e.msg,type:"success"}),a.getTableList())})).catch((function(e){a.loading=!1}))},changePackUpFunc:function(e){this.forArr(this.tableData,!e)},forArr:function(e,a){var t=this;e.forEach((function(e){t.$refs.theTable.toggleRowExpansion(e,a),e.children&&t.forArr(e.children,a)}))},changeShowFunc:function(e){var a,t=V(this.rawData);"all"==e||("show"==e&&(a=1),"hide"==e&&(a=0),this.showScreen(t,a)),this.tableData=t},showScreen:function(e,a){for(var t=0;t<e.length;t++){var l=e[t];void 0!==l.is_menu&&l.is_menu!=a?(e.splice(t,1),t--):l.children.length>0&&this.showScreen(l.children,a)}},getTableList:function(){var e=this;a({},!0).then((function(a){e.loading=!1,e.rawData=a.data,e.tableData=a.data})).catch((function(a){e.loading=!1}))},addClick:function(e,a){e&&void 0!==e?(this.add_type=a,this.selectModel=V(e)):this.parents_id=0,this.open_add=!0},editClick:function(e){this.selectModel=e,this.open_edit=!0},closeDialogFunc:function(e,a){"add"==a&&(this.open_add=e.openDialog,"success"==e.type&&this.getTableList()),"edit"==a&&(this.open_edit=e.openDialog,"success"==e.type&&this.getTableList())},deleteClick:function(e){var a=this;c.confirm("删除后不可恢复，确认删除该记录吗?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then((function(){a.loading=!0,P({access_id:e.access_id},!0).then((function(e){1==e.code&&(a.loading=!1,t({message:e.msg,type:"success"}),a.getTableList())})).catch((function(e){a.loading=!1}))})).catch((function(){}))}}},[["render",function(e,a,t,l,o,i){var r=d,s=h,c=n,_=u,g=p,V=b,w=f,F=W("Add"),M=W("Edit"),P=m;return D(),U("div",X,[v("div",G,[C(r,{type:"primary",onClick:i.addClick,icon:"Plus"},{default:k((function(){return[L("添加菜单&权限")]})),_:1},8,["onClick"]),C(_,{inline:!0,model:o.formSearch,size:"small"},{default:k((function(){return[C(c,null,{default:k((function(){return[C(s,{modelValue:o.formSearch.is_menu,"onUpdate:modelValue":a[0]||(a[0]=function(e){return o.formSearch.is_menu=e}),onChange:i.changeIsMenuFunc},{default:k((function(){return[L("只显示菜单")]})),_:1},8,["modelValue","onChange"]),C(s,{modelValue:o.formSearch.pack_up,"onUpdate:modelValue":a[1]||(a[1]=function(e){return o.formSearch.pack_up=e}),onChange:i.changePackUpFunc},{default:k((function(){return[L("收起")]})),_:1},8,["modelValue","onChange"])]})),_:1})]})),_:1},8,["model"])]),v("div",H,[v("div",J,[v("div",null,[S((D(),y(w,{size:"small",data:o.tableData,style:{width:"100%","margin-bottom":"20px"},"row-key":"access_id",border:"","default-expand-all":"",ref:"theTable","tree-props":{children:"children"}},{default:k((function(){return[C(g,{prop:"name",label:"菜单名称"},{default:k((function(e){return["/plus"==e.row.path?(D(),U("span",K,x(e.row.name),1)):(D(),U("span",N,x(e.row.name),1))]})),_:1}),C(g,{prop:"path",label:"路径"}),C(g,{prop:"is_route",label:"类别",width:"90"},{default:k((function(e){return[1==e.row.is_route?(D(),U("span",Q,"页面")):j("",!0),0==e.row.is_route?(D(),U("span",Y,"按钮")):j("",!0),2==e.row.is_route?(D(),U("span",Z,"独立单页面")):j("",!0)]})),_:1}),C(g,{prop:"is_show",label:"是否显示",width:"80"},{default:k((function(e){return[C(V,{modelValue:e.row.is_show,"onUpdate:modelValue":function(a){return e.row.is_show=a},"active-value":1,"inactive-value":0,onChange:function(a){return i.isShowFunc(e.row)},"active-color":"#13ce66","inactive-color":"#cccccc"},null,8,["modelValue","onUpdate:modelValue","onChange"])]})),_:1}),C(g,{prop:"sort",label:"排序",width:"60"}),C(g,{prop:"create_time",label:"添加时间",width:"140"}),C(g,{prop:"name",label:"操作",width:"230"},{default:k((function(e){return["/plus"!=e.row.path?(D(),y(r,{key:0,onClick:function(a){return i.addClick(e.row,"copy")},link:"",type:"primary",size:"small"},{default:k((function(){return[L("一键复制")]})),_:2},1032,["onClick"])):j("",!0),C(r,{onClick:function(a){return i.addClick(e.row,"child")},link:"",type:"primary",size:"small"},{default:k((function(){return[L("添加子菜单")]})),_:2},1032,["onClick"]),C(r,{onClick:function(a){return i.editClick(e.row)},link:"",type:"primary",size:"small"},{default:k((function(){return[L("编辑")]})),_:2},1032,["onClick"]),"/plus"!=e.row.path?(D(),y(r,{key:1,onClick:function(a){return i.deleteClick(e.row)},link:"",type:"primary",size:"small"},{default:k((function(){return[L("删除")]})),_:2},1032,["onClick"])):j("",!0)]})),_:1})]})),_:1},8,["data"])),[[P,o.loading]])])])]),o.open_add?(D(),y(F,{key:0,open_add:o.open_add,add_type:o.add_type,rawData:o.rawData,selectModel:o.selectModel,onCloseDialog:a[2]||(a[2]=function(e){return i.closeDialogFunc(e,"add")})},null,8,["open_add","add_type","rawData","selectModel"])):j("",!0),o.open_edit?(D(),y(M,{key:1,open_edit:o.open_edit,rawData:o.rawData,selectModel:o.selectModel,onCloseDialog:a[3]||(a[3]=function(e){return i.closeDialogFunc(e,"edit")})},null,8,["open_edit","rawData","selectModel"])):j("",!0)])}]]))}}}));
