import{u as e,r as n,_ as t}from"./index-ea3b29b4.js";import{u as s}from"./vue-router-0438cf31.js";import{E as i,J as a,w as o,K as c,o as l,c as r,a as u,L as m,P as h,a8 as p,X as d,W as v,a0 as f,O as g,ad as j}from"./@vue-5f6096d8.js";import{U as x}from"./user-d9286778.js";import{e as b,f as _}from"./element-plus-d2381bb9.js";import"./pinia-a7eba4b6.js";import"./vue-demi-71ba0ef2.js";import"./@element-plus-e5d54f4f.js";import"./@vueuse-40ae03aa.js";import"./lodash-es-493ac664.js";import"./async-validator-cf877c1f.js";import"./dayjs-03c8ce7e.js";import"./call-bind-224993cc.js";import"./get-intrinsic-bac01933.js";import"./has-symbols-456daba2.js";import"./has-proto-4a87f140.js";import"./function-bind-72d06d3b.js";import"./has-885c3436.js";import"./escape-html-1935ddb3.js";import"./normalize-wheel-es-3222b0a2.js";import"./@ctrl-91de2ec7.js";import"./request-9782e391.js";import"./axios-85bcd05e.js";import"./qs-bc70bccf.js";import"./side-channel-f1de7f2e.js";import"./object-inspect-02d150af.js";const k=i({setup(n,{emit:t}){const i=s(),{bus_emit:l}=e(),r=a({route:i,active_menu:null,active_child:0,menuList:[{name:"后台权限",icon:"icon-authority",path:"/access",redirect:"/access/Index",children:[{name:"权限列表",icon:null,path:"/access/Index"}]},{name:"平台",icon:"icon-zhuye",path:"/shop",redirect:"/shop/Index",children:[{name:"平台列表",icon:null,path:"/shop/Index"}]},{name:"消息",icon:"icon-xiaoxi1",path:"/message",redirect:"/message/Index",children:[{name:"消息列表",icon:null,path:"/message/Index"}]},{name:"设置",icon:"icon-icon-test1",path:"/setting",redirect:"/setting/Index",children:[{name:"设置",icon:null,path:"/setting/Index"}]},{name:"密码",icon:"icon-authority1",path:"/password",redirect:"/password/Index",children:[{name:"修改密码",icon:null,path:"/password/Index"}]}]}),u=async e=>{let n="首页",s="/"+e.path.split("/")[1];for(let t=0;t<r.menuList.length;t++){if(s==r.menuList[t].path){n=r.menuList[t].name,r.active_menu=t;let s=e.path;if(r.menuList[t].children){let e=r.menuList[t].children;for(let t=0;t<e.length;t++){if(s==e[t].path){n=e[t].name,r.active_child=t;break}r.active_child=0}}break}r.active_menu=null}l("MenuName",n),t("selectMenu",r.active_menu)};return o((()=>i),((e,n)=>{const t=e.path.split("/").length,s=n?n.path.split("/").length:0;r.transitionName=t<s?"slide-right":"slide-left",u(e)}),{deep:!0,immediate:!0}),{...c(r),selectMenu:u,route:i}},methods:{choseMenu(e){if(null!=e){let t=e.redirect||e.path;n.push(t)}else n.push("/Home")}}}),I={class:"left-menu-wrapper"},w={class:"menu-wrapper"},L={class:"home-login"},M=[u("span",{class:"icon iconfont icon-tubiaozhizuomoban-"},null,-1)],y={class:"nav-wrapper"},C={class:"first-menu-content"},z={class:"nav-ul"},N=["onClick"],q={class:"item-box"},B={class:"child-menu-wrapper"},H={class:"child-menu right-animation"},$={key:0},F=["onClick"],O={class:"name"};const R=t(k,[["render",function(e,n,t,s,i,a){return l(),r("div",I,[u("div",w,[u("div",L,[u("div",{class:m(null!=e.active_menu?"home-icon":"home-icon router-link-active"),onClick:n[0]||(n[0]=n=>e.choseMenu(null))},M,2)]),u("div",y,[u("div",C,[u("ul",z,[(l(!0),r(h,null,p(e.menuList,((n,t)=>(l(),r("li",{class:m(e.active_menu==t?"menu-item router-link-active":"menu-item"),key:t,onClick:t=>e.choseMenu(n)},[u("div",q,[u("span",{class:m("icon iconfont menu-item-icon "+n.icon)},null,2),u("span",null,v(n.name),1)])],10,N)))),128))])])])]),u("div",B,[u("div",H,[null!=e.active_menu?(l(),r("ul",$,[(l(!0),r(h,null,p(e.menuList[e.active_menu].children,((n,t)=>(l(),r("li",{class:m(e.active_child==t?"router-link router-link-active":"router-link"),key:t,onClick:t=>e.choseMenu(n)},[u("span",O,v(n.name),1)],10,F)))),128))])):d("",!0)])])])}]]),{userInfo:S,bus_on:T,afterLogout:E}=e(),J=i({setup(){const e=a({menu_title:"首页",userInfo:S});return T("MenuName",(n=>{e.menu_title=n})),{...c(e),userInfo:S,afterLogout:E}},methods:{exit(){let e=this;b.confirm("此操作将退出登录, 是否继续?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then((()=>{x.loginOut({},!0).then((n=>{e.logout()})).catch((e=>{}))})).catch((()=>{_({type:"info",message:"已取消退出"})}))},async logout(){await this.afterLogout(),this.$router.push("/login")}}}),K={class:"common-header"},P={class:"breadcrumb"},U={class:"baseInfo-left-base"},W={class:"name"},X={class:"header-navbar"},A={class:"header-navbar-icon"},D=u("span",{class:"ml4 icon iconfont icon-geren9"},null,-1),G={class:"text ml4"},Q=[u("span",{class:"icon iconfont icon-tuichu"},null,-1),u("span",{class:"text ml4"},"退出",-1)];const V=i({components:{Heads:t(J,[["render",function(e,n,t,s,i,a){return l(),r("div",K,[u("div",P,[u("div",U,[u("span",W,v(e.menu_title),1)]),u("div",X,[u("div",A,[D,u("span",G,v(e.userInfo&&e.userInfo.userName)+"，欢迎您！",1)]),u("div",{class:"header-navbar-icon",onClick:n[0]||(n[0]=f(((...n)=>e.exit&&e.exit(...n)),["stop"]))},Q)])])])}]])}}),Y={class:"right-content"},Z={class:"right-content-box"},ee={class:"subject-wrap"};const ne=t(i({setup(){const e=a({hasChild:null});return{...c(e)}},components:{LeftMenu:R,RightContent:t(V,[["render",function(e,n,t,s,i,a){const o=j("Heads"),c=j("router-view");return l(),r("div",Y,[g(o),u("div",Z,[u("div",ee,[g(c)])])])}]])},watch:{$route(e,n){n.path!=e.path&&this.$router.go(0)}},methods:{selectMenuFunc(e){this.hasChild=e}}}),[["render",function(e,n,t,s,i,a){const o=j("LeftMenu"),c=j("RightContent");return l(),r("div",{class:m((e.hasChild,"main right-big"))},[g(o,{onSelectMenu:e.selectMenuFunc},null,8,["onSelectMenu"]),g(c)],2)}]]);export{ne as default};
