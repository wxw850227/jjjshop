import{_ as e,L as s,q as l,l as o,s as t,z as a,p as d,m as r,o as i,c as n,w as p,g as u,f as _,a as c,d as f,h as g,j as m,I as w,A as b}from"./index-61e49878.js";const h=e({data:()=>({formData:{mobile:""},loging_password:"",register:{mobile:"",password:"",repassword:""},resetpassword:{mobile:"",password:"",repassword:""},is_send:!1,send_btn_txt:"获取验证码",second:60,ip:"",isShow:!0,is_login:1,is_code:!1,phoneHeight:0}),onLoad(){},onShow(){this.init()},methods:{init(){let e=this;s({success(s){e.phoneHeight=s.windowHeight}})},formSubmit(){let e=this,s={mobile:e.formData.mobile},r="";/^1(3|4|5|6|7|8|9)\d{9}$/.test(e.formData.mobile)?""!=e.loging_password?(s.password=e.loging_password,r="user.useropen/phonelogin",o({title:"正在提交"}),e._post("user.useropen/phonelogin",s,(e=>{t("token",e.data.token),t("user_id",e.data.user_id),a({delta:2})}),!1,(()=>{d()}))):l({title:"密码不能为空！",duration:2e3,icon:"none"}):l({title:"手机有误,请重填！",duration:2e3,icon:"none"})},registerSub(){let e=this;/^1(3|4|5|6|7|8|9)\d{9}$/.test(e.register.mobile)?e.register.password.length<6?l({title:"密码至少6位数！",duration:2e3,icon:"none"}):e.register.password===e.register.repassword?(e.register.invitation_id=r("invitation_id")||0,e.register.referee_id=r("referee_id")||0,o({title:"正在提交"}),e._post("user.useropen/register",e.register,(s=>{l({title:"注册成功",duration:3e3}),e.formData.mobile=e.register.mobile,e.register={mobile:"",password:"",repassword:""},e.second=0,e.changeMsg(),e.is_login=1}),!1,(()=>{d()}))):l({title:"两次密码输入不一致！",duration:2e3,icon:"none"}):l({title:"手机有误,请重填！",duration:2e3,icon:"none"})},resetpasswordSub(){let e=this;/^1(3|4|5|6|7|8|9)\d{9}$/.test(e.resetpassword.mobile)?e.resetpassword.password.length<6?l({title:"密码至少6位数！",duration:2e3,icon:"none"}):e.resetpassword.password===e.resetpassword.repassword?(o({title:"正在提交"}),e._post("user.useropen/resetpassword",e.resetpassword,(s=>{l({title:"重置成功",duration:3e3}),e.formData.mobile=e.resetpassword.mobile,e.resetpassword={mobile:"",password:"",repassword:""},e.second=0,e.changeMsg(),e.is_login=1}),!1,(()=>{d()}))):l({title:"两次密码输入不一致！",duration:2e3,icon:"none"}):l({title:"手机有误,请重填！",duration:2e3,icon:"none"})}}},[["render",function(e,s,l,o,t,a){const d=_,r=m,h=w,x=b;return i(),n(d,{class:"login-container",style:u("height: "+t.phoneHeight+"px;")},{default:p((()=>[c(d,{class:"skip",onClick:s[0]||(s[0]=s=>e.gotoPage("/pages/index/index"))},{default:p((()=>[f("跳过→")])),_:1}),2==t.is_login?(i(),n(d,{key:0,class:"p-30-75"},{default:p((()=>[c(d,{class:"login_topbpx"},{default:p((()=>[c(d,{class:"login_tit"},{default:p((()=>[f("注册")])),_:1}),c(d,{class:"login_top"},{default:p((()=>[f("已有账户，"),c(r,{class:"red",onClick:s[1]||(s[1]=e=>t.is_login=1)},{default:p((()=>[f("立即登录")])),_:1})])),_:1})])),_:1}),c(d,{class:"group-bd"},{default:p((()=>[c(d,{class:"form-level d-s-c"},{default:p((()=>[c(d,{class:"val flex-1 input_botom"},{default:p((()=>[c(h,{type:"text",modelValue:t.register.mobile,"onUpdate:modelValue":s[2]||(s[2]=e=>t.register.mobile=e),placeholder:"请填写手机号",disabled:t.is_send},null,8,["modelValue","disabled"])])),_:1})])),_:1}),c(d,{class:"form-level d-s-c"},{default:p((()=>[c(d,{class:"val flex-1 input_botom"},{default:p((()=>[c(h,{type:"text",password:"true",modelValue:t.register.password,"onUpdate:modelValue":s[3]||(s[3]=e=>t.register.password=e),placeholder:"请输入密码"},null,8,["modelValue"])])),_:1})])),_:1}),c(d,{class:"form-level d-s-c"},{default:p((()=>[c(d,{class:"val flex-1 input_botom"},{default:p((()=>[c(h,{type:"text",password:"true",modelValue:t.register.repassword,"onUpdate:modelValue":s[4]||(s[4]=e=>t.register.repassword=e),placeholder:"请确认密码"},null,8,["modelValue"])])),_:1})])),_:1})])),_:1})])),_:1})):g("",!0),1==t.is_login?(i(),n(d,{key:1,class:"p-30-75"},{default:p((()=>[c(d,{class:"login_topbpx"},{default:p((()=>[c(d,{class:"login_tit"},{default:p((()=>[f("登录")])),_:1}),c(d,{class:"login_top"},{default:p((()=>[f("还没有账号，"),c(r,{class:"red",onClick:s[5]||(s[5]=e=>t.is_login=2)},{default:p((()=>[f("立即注册")])),_:1})])),_:1})])),_:1}),c(d,{class:"group-bd"},{default:p((()=>[c(d,{class:"form-level d-s-c"},{default:p((()=>[c(d,{class:"val flex-1 input_botom"},{default:p((()=>[c(h,{type:"text",modelValue:t.formData.mobile,"onUpdate:modelValue":s[6]||(s[6]=e=>t.formData.mobile=e),placeholder:"请填写手机号"},null,8,["modelValue"])])),_:1})])),_:1}),c(d,{class:"form-level d-s-c"},{default:p((()=>[c(d,{class:"val flex-1 input_botom"},{default:p((()=>[c(h,{type:"text",password:"true",modelValue:t.loging_password,"onUpdate:modelValue":s[7]||(s[7]=e=>t.loging_password=e),placeholder:"请输入密码"},null,8,["modelValue"])])),_:1})])),_:1}),c(d,{class:"gray9"},{default:p((()=>[f("账号:18888888888 密码:123456")])),_:1})])),_:1})])),_:1})):g("",!0),0==t.is_login?(i(),n(d,{key:2,class:"p-30-75"},{default:p((()=>[c(d,{class:"login_topbpx"},{default:p((()=>[c(d,{class:"login_tit"},{default:p((()=>[f("重置密码")])),_:1}),c(d,{class:"login_top"},{default:p((()=>[c(r,{class:"red",onClick:s[8]||(s[8]=e=>t.is_login=1)},{default:p((()=>[f("立即登录")])),_:1})])),_:1})])),_:1}),c(d,{class:"group-bd"},{default:p((()=>[c(d,{class:"form-level d-s-c"},{default:p((()=>[c(d,{class:"val flex-1 input_botom"},{default:p((()=>[c(h,{type:"text",modelValue:t.resetpassword.mobile,"onUpdate:modelValue":s[9]||(s[9]=e=>t.resetpassword.mobile=e),placeholder:"请填写手机号",disabled:t.is_send},null,8,["modelValue","disabled"])])),_:1})])),_:1}),c(d,{class:"form-level d-s-c"},{default:p((()=>[c(d,{class:"val flex-1 input_botom"},{default:p((()=>[c(h,{type:"text",password:"true",modelValue:t.resetpassword.password,"onUpdate:modelValue":s[10]||(s[10]=e=>t.resetpassword.password=e),placeholder:"请输入密码"},null,8,["modelValue"])])),_:1})])),_:1}),c(d,{class:"form-level d-s-c"},{default:p((()=>[c(d,{class:"val flex-1 input_botom"},{default:p((()=>[c(h,{type:"text",password:"true",modelValue:t.resetpassword.repassword,"onUpdate:modelValue":s[11]||(s[11]=e=>t.resetpassword.repassword=e),placeholder:"请确认密码"},null,8,["modelValue"])])),_:1})])),_:1})])),_:1})])),_:1})):g("",!0),2==t.is_login?(i(),n(d,{key:3,style:{"padding-top":"80rpx"},class:"btns p-30-75"},{default:p((()=>[c(x,{type:"default",onClick:a.registerSub},{default:p((()=>[f("注册")])),_:1},8,["onClick"])])),_:1})):g("",!0),1==t.is_login?(i(),n(d,{key:4,style:{"padding-top":"80rpx"},class:"btns p-30-75"},{default:p((()=>[c(x,{type:"default",onClick:a.formSubmit},{default:p((()=>[f("登录")])),_:1},8,["onClick"])])),_:1})):g("",!0),0==t.is_login?(i(),n(d,{key:5,style:{"padding-top":"80rpx"},class:"btns p-30-75"},{default:p((()=>[c(x,{type:"default",onClick:a.resetpasswordSub},{default:p((()=>[f("重置密码")])),_:1},8,["onClick"])])),_:1})):g("",!0)])),_:1},8,["style"])}],["__scopeId","data-v-047ec951"]]);export{h as default};
