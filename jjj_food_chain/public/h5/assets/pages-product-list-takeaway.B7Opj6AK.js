import{_ as t,o as e,c as a,w as l,a as s,a2 as i,h as o,t as d,g as r,d as c,n,b as p,r as u,F as _,J as y,e as f,B as g,l as h,a3 as m,a5 as k,E as C,p as b,k as w,m as x,D as T,q as v,a6 as L,v as S,j as I,z as P,i as z,C as D}from"./index-g5-6g3i5.js";import{_ as M,p as B,a as H,b as V}from"./loading.BZ65y7cx.js";import{r as F}from"./uni-app.es.JON5rhdf.js";const $=t({components:{modal:t({name:"Modal",props:{show:{type:Boolean,default:!1},custom:{type:Boolean,default:!1},width:{type:String,default:"100%"},padding:{type:String,default:"40rpx"},radius:{type:String,default:"24rpx"},title:{type:String,default:""},content:{type:String,default:""},color:{type:String,default:"#999"},size:{type:Number,default:28},shape:{type:String,default:"square"},button:{type:Array,default:function(){return[{text:"取消",type:"red",plain:!0},{text:"确定",type:"red",plain:!1}]}},maskClosable:{type:Boolean,default:!0},fadein:{type:Boolean,default:!1}},data:()=>({}),methods:{handleClick(t){if(!this.show)return;const e=t.currentTarget.dataset;this.$emit("click",{index:Number(e.index)})},handleClickCancel(){this.maskClosable&&this.$emit("cancel")}}},[["render",function(t,h,m,k,C,b){const w=f,x=g;return e(),a(w,{onTouchmove:h[0]||(h[0]=y((()=>{}),["stop","prevent"]))},{default:l((()=>[s(w,{class:c(["modal-box",[m.fadein||m.show?"modal-normal":"modal-scale",m.show?"modal-show":""]]),style:n({width:m.width,padding:m.padding,borderRadius:m.radius})},{default:l((()=>[m.custom?(e(),a(w,{key:0},{default:l((()=>[i(t.$slots,"default",{},void 0,!0)])),_:3})):(e(),a(w,{key:1},{default:l((()=>[m.title?(e(),a(w,{key:0,class:"modal-title"},{default:l((()=>[o(d(m.title),1)])),_:1})):r("",!0),s(w,{class:c(["modal-content",[m.title?"":"mtop"]]),style:n({color:m.color,fontSize:m.size+"rpx"})},{default:l((()=>[i(t.$slots,"default",{},void 0,!0)])),_:3},8,["class","style"]),s(w,{class:c(["modalBtn-box",[2!=m.button.length?"flex-column":""]])},{default:l((()=>[(e(!0),p(_,null,u(m.button,((t,s)=>(e(),a(x,{key:s,class:c(["modal-btn",[(t.type||"primary")+(t.plain?"-outline":""),2!=m.button.length?"btn-width":"",m.button.length>2?"mbtm":"","circle"==m.shape?"circle-btn":"","btn-"+(t.size||"default")]]),"hover-class":(t.plain?"outline":t.type||"primary")+"-hover","data-index":s,onClick:b.handleClick},{default:l((()=>[o(d(t.text||"确定"),1)])),_:2},1032,["class","hover-class","data-index","onClick"])))),128))])),_:1},8,["class"])])),_:3}))])),_:3},8,["style","class"]),s(w,{class:c(["modal-mask",[m.show?"mask-show":""]]),onClick:b.handleClickCancel},null,8,["class","onClick"])])),_:3})}],["__scopeId","data-v-86ab8852"]]),popupLayer:M,prospec:B},data:()=>({loadingClock:!1,isDetail:!1,isLoading:!0,supplier:{name:"",business_status:0},shop_supplier_id:0,loading:!0,currentCateId:0,cateScrollTop:0,menuScrollIntoView:"",sizeCalcState:!1,productList:[],productModel:{},clock:!1,total_price:0,cart_total_num:0,cart_product_id:0,cartPopupVisible:!1,cart_list:[],cart_type:0,phoneHeight:0,scrollviewHigh:0,addclock:!1,address_detail:"",longitude:0,latitude:0,address_id:0,bag_type:1,total_bag_price:0,orderType:"",dinner_type:20,delivery_set:[],isFirst:!0,min_money:0,min_money_diff:0,line_price:0,scrollLast:0}),onLoad(t){let e=this;e.orderType=t.orderType,"takeout"==e.orderType?e.dinner_type=10:e.dinner_type=20,e.shop_supplier_id=h("selectedId")?h("selectedId"):0},onShow(){this.isDetail=!1,this.init()},methods:{stopClick:()=>!1,getUserInfo(){let t=this;t.loading=!0,t.isLogin=!1,t._get("index/userInfo",{},(function(e){e.data&&e.data.user&&(t.isLogin=!0),10==t.dinner_type&&e.data&&e.data.user&&e.data.user.address&&e.data.user.address_id?(t.latitude=e.data.user.address.latitude,t.longitude=e.data.user.address.longitude,t.address_detail=e.data.user.address.detail,t.getCategory(!0)):t.getcityData()}))},init(){this.addclock=!1,this.clock=!1,this.loadingClock=!1,this.loading=!0,this.isLoading=!0,this.productList=[],this.sizeCalcState=!1,this.getUserInfo()},scrollInit(){let t=this;t.scrollviewHigh||m({success(e){t.phoneHeight=e.windowHeight,k().select(".nav").boundingClientRect((e=>{let a=t.phoneHeight-e.height;t.scrollviewHigh=a})).exec()}})},getCategory(t){let e=this;this.sizeCalcState=!1;let a="takeout"==e.orderType?10:20;e._get("product.category/index",{type:0,shop_supplier_id:e.shop_supplier_id||0,longitude:e.longitude,latitude:e.latitude,delivery:a,order_type:0,table_id:0,cart_type:e.cart_type||0},(function(a){if(e.supplier=a.data.supplier,e.min_money=(1*a.data.supplier.min_money).toFixed(2),e.productList=a.data.list,e.currentCateId||(e.currentCateId=e.productList[0].category_id),e.delivery_set=a.data.supplier.delivery_set,e.isFirst){if(e.orderType){let t="takeout"==e.orderType?"10":"20";if(-1==e.delivery_set.indexOf(t)){let a="";"20"==t?(a="当前门店不支持自取，已为您切换为配送",e.orderType="takeout"):(a="当前门店不支持配送，已为您切换为自取",e.orderType="takein"),C({title:"提示",content:a,showCancel:!1})}}e.isFirst=!1}e.address_id=a.data.address_id,e.bag_type=a.data.supplier.bag_type,e.loading=!1,e.isLoading=!1,e.$nextTick((function(){e.scrollInit()})),e.isLogin&&t&&e.getCart()}),(function(t){e.showError(t.msg,(()=>{e.gotoPage("/pages/index/index")}))}))},reCart(t){let e=this;e.loadingClock=!1,e.cart_total_num=t.data.cartInfo.cart_total_num,e.line_price=t.data.cartInfo.total_line_money,e.total_price=t.data.cartInfo.total_pay_price,e.total_bag_price=t.data.cartInfo.total_bag_price,e.min_money_diff=t.data.cartInfo.min_money_diff,e.cart_list&&""!=e.cart_list||(e.cartPopupVisible=!1)},addCart(t){let e=this;if(20==t.spec_types)return void e.gotoDetail(t);if(e.addclock)return;if(0!=t.limit_num&&t.limit_num<=t.cart_num)return void b({icon:"none",title:"超过限购数量"});if(t.product_stock<=0||t.product_stock<=t.cart_num)return void b({icon:"none",title:"没有更多库存了"});let a={product_id:t.product_id,product_num:1,product_sku_id:t.sku[0].product_sku_id,attr:"",feed:"",describe:"",price:t.sku[0].product_price,bag_price:t.sku[0].bag_price,shop_supplier_id:t.supplier.shop_supplier_id,cart_type:0,dinner_type:e.dinner_type,product_price:t.sku[0].line_price,delivery:"takeout"==e.orderType?10:20};e.addclock=!0,w({title:"",mask:!0}),e._post("order.cart/add",a,(function(t){x(),e.reCart(t),e.addclock=!1,e.getCategory(!1)}),(function(t){x(),e.addclock=!1}))},reduceFunc(t){let e=this;if(e.addclock||t.cart_num<=0)return;if(20==t.spec_types)return void e.openCartPopup(t.product_id);let a=t.product_id;e.addclock=!0,w({title:"",mask:!0}),e._post("order.cart/productSub",{product_id:a,type:"down",cart_type:0,dinner_type:e.dinner_type,shop_supplier_id:e.shop_supplier_id,delivery:"takeout"==e.orderType?10:20},(function(t){x(),e.reCart(t),e.addclock=!1,e.getCategory(!1)}),(function(){x(),e.addclock=!1}))},getCartLoading(){console.log("getCartLoading");let t=this;t._get("order.cart/lists",{shop_supplier_id:t.shop_supplier_id,cart_type:0,delivery:"takeout"==t.orderType?10:20,product_id:t.cart_product_id},(function(e){t.cart_list=e.data.productList,t.isLoading=!0,t.reCart(e),x()}),(t=>{x()}))},getCart(){let t=this;if(t.isLogin)return new Promise(((e,a)=>{w({title:"",mask:!0}),t._get("order.cart/lists",{shop_supplier_id:t.shop_supplier_id,cart_type:0,delivery:"takeout"==t.orderType?10:20,product_id:t.cart_product_id},(function(a){x(),t.isLoading=!0,t.reCart(a),t.cart_list=a.data.productList,e(!0)}),(t=>{x()}))}))},cartAdd(t){let e=this;if(e.addclock)return;e.addclock=!0;let a=t.product_id;w({title:"",mask:!0}),e._post("order.cart/sub",{product_id:a,total_num:1,cart_id:t.cart_id,type:"up",cart_type:0,dinner_type:e.dinner_type,shop_supplier_id:e.shop_supplier_id,delivery:"takeout"==e.orderType?10:20},(function(t){e.addclock=!1,e.getCategory(!1),e.getCartLoading()}),(function(){x(),e.addclock=!1}))},cartReduce(t){let e=this;if(e.addclock)return;e.addclock=!0;let a=t.product_id;w({title:"",mask:!0}),e._post("order.cart/sub",{product_id:a,total_num:1,cart_id:t.cart_id,type:"down",cart_type:0,dinner_type:e.dinner_type,shop_supplier_id:e.shop_supplier_id,delivery:"takeout"==e.orderType?10:20},(function(t){e.addclock=!1,e.getCategory(!1),e.getCartLoading()}),(function(){x(),e.addclock=!1}))},takout(){"takeout"!=this.orderType&&(this.orderType="takeout",this.dinner_type=10,this.init())},takein(){"takein"!=this.orderType&&(this.orderType="takein",this.dinner_type=20,this.init())},handleMenuTap(t){let e=this;e.sizeCalcState||e.calcSize(),e.currentCateId=t,e.$nextTick((()=>{e.cateScrollTop=e.productList.find((e=>e.category_id==t)).top,e.cateScrollTop||0==e.cateScrollTop||setTimeout((function(){e.handleMenuTap(t)}),300)}))},handleGoodsScroll({detail:t}){this.sizeCalcState||this.calcSize(),this.scrollLast=t.scrollTop;const{scrollTop:e}=t;let a=this.productList.filter((t=>t.top-5<=e)).reverse();a.length>0&&(this.currentCateId=a[0].category_id)},calcSize(){let t=0;this.productList.forEach((e=>{k().select(`#cate-${e.category_id}`).fields({size:!0},(a=>{e.top=t,null!=a&&(t+=a.height),e.bottom=t})).exec()})),this.sizeCalcState=!0},closeGoodDetailModal(t,e){this.isDetail=!1,this.clock=!1,t&&(this.reCart(e),this.getCategory(!1))},async openCartPopup(t){this.cart_total_num&&(this.cartPopupVisible||(this.cart_list=[],this.cart_product_id=t,await this.getCart()),this.cartPopupVisible=!this.cartPopupVisible)},closeCallBack(){this.cart_product_id=0,this.cart_list=[],this.cartPopupVisible=!1},handleCartClear(){let t=this;C({title:"提示",content:"确定清空购物车么",success(e){e.confirm?t.clearCart():e.cancel&&console.log("用户点击取消")}})},clearCart(){let t=this;t._post("order.cart/delete",{shop_supplier_id:t.shop_supplier_id,cart_type:0},(function(e){t.cartPopupVisible=!1,t.cart_list=[],t.init()}))},toPay(){let t=this;0!=t.address_id||"takeout"!=t.orderType?t.loadingClock||(t.loadingClock=!0,w({title:"加载中",mask:!0}),t._get("order.cart/lists",{shop_supplier_id:t.shop_supplier_id,cart_type:0,delivery:"takeout"==t.orderType?10:20},(function(e){x(),t.reCart(e),t.cart_list=e.data.productList;let a=[];if(t.cart_list.forEach((t=>{a.push(t.cart_id)})),0==a.length)return b({title:"请选择商品",icon:"none"}),!1;let l="takeout"==t.orderType?10:20;T({url:"/pages/order/confirm-order?order_type=cart&cart_ids="+a.join(",")+"&delivery="+l+"&shop_supplier_id="+t.shop_supplier_id+"&cart_type=0&dinner_type="+l}),t.loadingClock=!1}),(()=>{x(),t.loadingClock=!1}))):C({title:"提示",content:"您还没选择收货地址,请先选择收货地址",success(){t.gotoPage("/pages/user/address/storeaddress?shop_supplier_id="+t.shop_supplier_id)}})},gotoDetail(t){let e=this,a="takeout"==this.orderType?10:20;e.productModel={product_id:t.product_id||0,delivery:a,bag_type:e.bag_type||0,dinner_type:e.dinner_type||0,cart_type:e.cart_type||0,table_id:0,shop_supplier_id:e.shop_supplier_id||0},e.isDetail=!0},getcityData(){let t=this;t.isWeixin()?(w({title:"加载中",mask:!0}),t._post("index/index",{url:window.location.href},(function(e){let a=e.data.signPackage;x(),t.getWxLocation(a)}))):t.getLocation()},getLocation(t){let e=this;v({type:"wgs84",success(t){console.log("getLocation"),console.log(t),e.longitude=t.longitude,e.latitude=t.latitude,e.getCategory(!0)},fail(t){e.longitude=0,e.latitude=0,b({title:"获取定位失败，请点击右下角按钮打开定位权限",duration:2e3,icon:"none"}),e.getCategory(!0)}})},getWxLocation(t,e){let a=this;L.config(JSON.parse(t)),L.ready((function(t){L.getLocation({type:"wgs84",success:function(t){a.longitude=t.longitude,a.latitude=t.latitude,a.getCategory(!0)},fail(t){a.longitude=0,a.latitude=0,a.getCategory(!0)}})})),L.error((function(t){console.log(t)}))}}},[["render",function(t,i,h,m,k,C){const b=P,w=f,x=z,T=D,v=g,L=F(S("popup-layer"),M),B=I("prospec");return e(),a(w,{class:c(["container",t.theme()||""]),"data-theme":t.theme()},{default:l((()=>[s(w,{class:"main"},{default:l((()=>[s(w,{class:"nav"},{default:l((()=>[s(w,{class:"header"},{default:l((()=>["takein"==k.orderType?(e(),a(w,{key:0,class:"left"},{default:l((()=>[s(w,{class:"store-name"},{default:l((()=>[s(b,{class:"fb"},{default:l((()=>[o(d(k.supplier.name),1)])),_:1})])),_:1}),s(w,{class:"gray9 f24"},{default:l((()=>[s(b,{class:"icon iconfont icon-diliweizhi"}),o("距离您"+d(k.supplier.distance),1)])),_:1})])),_:1})):r("",!0),"takeout"==k.orderType?(e(),a(w,{key:1,class:"left"},{default:l((()=>[s(w,{class:"store-name"},{default:l((()=>[s(b,{class:"fb"},{default:l((()=>[o(d(k.supplier.name),1)])),_:1})])),_:1}),k.address_detail?(e(),a(w,{key:0,class:"d-s-c f24",style:{"margin-right":"90rpx"}},{default:l((()=>[s(w,{class:"text-ellipsis gray9 d-s-c"},{default:l((()=>[s(b,{class:"icon iconfont icon-dizhi"}),o(" 配送地址："+d(k.address_detail||"请选择收货地址"),1)])),_:1}),s(w,{class:"theme-notice f-s-0",onClick:i[0]||(i[0]=e=>t.gotoPage("/pages/user/address/storeaddress?shop_supplier_id="+k.shop_supplier_id))},{default:l((()=>[o(" 更换地址 ")])),_:1})])),_:1})):(e(),a(w,{key:1,class:"d-s-c f24",style:{"margin-right":"90rpx"},onClick:i[1]||(i[1]=e=>t.gotoPage("/pages/user/address/storeaddress?shop_supplier_id="+k.shop_supplier_id))},{default:l((()=>[s(w,{class:"text-ellipsis gray9 d-s-c"},{default:l((()=>[s(b,{class:"icon iconfont icon-dizhi"}),o(" 请选择收货地址 ")])),_:1})])),_:1}))])),_:1})):r("",!0),s(w,{class:"dinner-right"},{default:l((()=>[(e(!0),p(_,null,u(k.delivery_set,((t,i)=>(e(),p(_,{key:"a-"+i},["10"==t?(e(),a(w,{key:0,class:c(["dinner_type",{active:"takeout"==k.orderType}]),onClick:C.takout},{default:l((()=>[s(b,null,{default:l((()=>[o("配送")])),_:1})])),_:1},8,["class","onClick"])):r("",!0)],64)))),128)),(e(!0),p(_,null,u(k.delivery_set,((t,i)=>(e(),p(_,{key:"b-"+i},["20"==t?(e(),a(w,{key:0,class:c(["dinner_type",{active:"takein"==k.orderType}]),onClick:C.takein},{default:l((()=>[s(b,null,{default:l((()=>[o("自取")])),_:1})])),_:1},8,["class","onClick"])):r("",!0)],64)))),128))])),_:1})])),_:1})])),_:1}),s(w,{class:"content"},{default:l((()=>[s(T,{class:"menus",style:n("height:"+k.scrollviewHigh+"px;"),"scroll-into-view":k.menuScrollIntoView,"scroll-y":""},{default:l((()=>[s(w,{class:"category-wrapper"},{default:l((()=>[(e(!0),p(_,null,u(k.productList,((t,i)=>(e(),p(_,{key:i},[0!=t.products.length?(e(),a(w,{key:0,class:c(["menu d-s-c pr",{current:t.category_id===k.currentCateId}]),id:`menu-${t.category_id}`,onClick:e=>C.handleMenuTap(t.category_id)},{default:l((()=>[t.images?(e(),a(x,{key:0,class:"f-s-0 menu-imgs",src:t.images.file_path,mode:"aspectFill"},null,8,["src"])):r("",!0),s(w,{class:"text-ellipsis"},{default:l((()=>[o(d(t.name),1)])),_:2},1024),t.product_num?(e(),a(w,{key:1,class:"menu-cartNum"},{default:l((()=>[o(d(t.product_num),1)])),_:2},1024)):r("",!0)])),_:2},1032,["id","class","onClick"])):r("",!0)],64)))),128)),s(w,{class:"menu-bottom"})])),_:1})])),_:1},8,["style","scroll-into-view"]),s(T,{class:"goods pr",style:n("height:"+k.scrollviewHigh+"px;"),"scroll-y":"","scroll-top":k.cateScrollTop,onScroll:C.handleGoodsScroll},{default:l((()=>[s(w,{class:"goods-wrapper"},{default:l((()=>[s(w,{class:"list",style:n("padding-bottom:"+(2*k.scrollviewHigh-238)+"rpx;")},{default:l((()=>[(e(!0),p(_,null,u(k.productList,((i,c)=>(e(),p(_,{key:c},[0!=i.products.length?(e(),a(w,{key:0,class:"category",id:`cate-${i.category_id}`},{default:l((()=>[s(w,{class:"title"},{default:l((()=>[s(b,null,{default:l((()=>[o(d(i.name),1)])),_:2},1024)])),_:2},1024),s(w,{class:"goods-items"},{default:l((()=>[(e(!0),p(_,null,u(i.products,((i,c)=>(e(),a(w,{class:"good",onClick:t=>C.gotoDetail(i),key:c},{default:l((()=>[s(w,{class:"image-boxs"},{default:l((()=>[i.product_stock<=0?(e(),a(w,{key:0,class:"sallsell-out"},{default:l((()=>[s(w,{class:"sallsell-out-btn"},{default:l((()=>[o("当前售罄")])),_:1})])),_:1})):r("",!0),s(x,{src:i.product_image,class:"image"},null,8,["src"])])),_:2},1024),s(w,{class:"product-info"},{default:l((()=>[s(w,{class:"ww100"},{default:l((()=>[s(w,{class:"name text-ellipsis"},{default:l((()=>[o(d(i.product_name),1)])),_:2},1024),s(w,{class:"tips text-ellipsis"},{default:l((()=>[o(d(i.selling_point),1)])),_:2},1024)])),_:2},1024),s(w,{class:"price_and_action"},{default:l((()=>[s(w,null,{default:l((()=>[s(b,{class:"f24 theme-price"},{default:l((()=>[o("￥")])),_:1}),s(b,{class:"f34 theme-price"},{default:l((()=>[o(d(i.product_price),1)])),_:2},1024),1*i.product_price!=1*i.line_price?(e(),a(b,{key:0,class:"linprice"},{default:l((()=>[o("￥"+d(1*i.line_price),1)])),_:2},1024)):r("",!0)])),_:2},1024),s(w,{class:"btn-group"},{default:l((()=>[0!=i.cart_num?(e(),a(x,{key:0,onClick:y((t=>C.reduceFunc(i)),["stop"]),class:"add-image",src:"/static/icon/cart/reduce-"+t.theme()+".png",mode:""},null,8,["onClick","src"])):r("",!0),0!=i.cart_num?(e(),a(w,{key:1,class:"number"},{default:l((()=>[o(d(i.cart_num),1)])),_:2},1024)):r("",!0),i.product_stock>0?(e(),a(x,{key:2,onClick:y((t=>C.addCart(i)),["stop"]),class:"add-image",src:"/static/icon/cart/add-"+t.theme()+".png",mode:""},null,8,["onClick","src"])):r("",!0),i.product_stock<=0?(e(),a(x,{key:3,class:"add-image",src:V,mode:""})):r("",!0)])),_:2},1024)])),_:2},1024)])),_:2},1024)])),_:2},1032,["onClick"])))),128))])),_:2},1024)])),_:2},1032,["id"])):r("",!0)],64)))),128))])),_:1},8,["style"])])),_:1})])),_:1},8,["style","scroll-top","onScroll"])])),_:1}),s(w,{class:"cart-box",onClick:i[2]||(i[2]=t=>C.openCartPopup(0))},{default:l((()=>[s(w,{class:"mark"},{default:l((()=>[s(w,{class:"icon iconfont icon-gouwudai cart-view"}),k.cart_total_num?(e(),a(w,{key:0,class:"tag"},{default:l((()=>[o(d(k.cart_total_num),1)])),_:1})):r("",!0)])),_:1}),k.cart_total_num?(e(),a(w,{key:0,class:"price"},{default:l((()=>[s(w,null,{default:l((()=>[s(b,{class:"f22"},{default:l((()=>[o("￥")])),_:1}),s(b,{class:"f36"},{default:l((()=>[o(d(k.total_price),1)])),_:1}),s(b,{class:"gray9 f22 text-d-line fn ml10"},{default:l((()=>[o("￥"+d(k.line_price),1)])),_:1})])),_:1}),0!=k.total_bag_price?(e(),a(w,{key:0,class:"gray9 f22"},{default:l((()=>[s(b,{class:""},{default:l((()=>[o("包含包装费￥")])),_:1}),o(" "+d(k.total_bag_price),1)])),_:1})):r("",!0)])),_:1})):(e(),a(w,{key:1,class:"flex-1 f32 white"},{default:l((()=>[o("未选购商品")])),_:1})),k.min_money_diff<=0||"takeout"!=k.orderType?(e(),a(v,{key:2,class:"pay-btn",disabled:!k.cart_total_num,onClick:y(C.toPay,["stop"])},{default:l((()=>[o("去结算")])),_:1},8,["disabled","onClick"])):r("",!0),k.min_money_diff>0&&0==k.total_price&&"takeout"==k.orderType?(e(),a(v,{key:3,class:"btn-gray",disabled:""},{default:l((()=>[o(d("￥"+k.min_money+"起送"),1)])),_:1})):r("",!0),k.min_money_diff>0&&0!=k.total_price&&"takeout"==k.orderType?(e(),a(v,{key:4,class:"btn-gray",disabled:""},{default:l((()=>[o(d("还差￥"+k.min_money_diff+"起送"),1)])),_:1})):r("",!0)])),_:1})])),_:1}),k.cart_total_num>0?(e(),a(L,{key:0,direction:"top","show-pop":k.cartPopupVisible,class:"cart-popup",onCloseCallBack:C.closeCallBack},{content:l((()=>[s(w,{class:"cart-popup pr"},{default:l((()=>[s(w,{class:"top d-b-c"},{default:l((()=>[s(w,{class:"f30 gray3 d-s-c"},{default:l((()=>[o(" 购物车 "),k.total_bag_price?(e(),a(w,{key:0,class:"f22 gray3"},{default:l((()=>[o("（打包费 "),s(b,{class:"theme-price"},{default:l((()=>[o("￥"+d(k.total_bag_price),1)])),_:1}),o("）")])),_:1})):r("",!0)])),_:1}),s(w,{onClick:C.handleCartClear,class:"d-c-c"},{default:l((()=>[s(b,{class:"icon iconfont icon-shanchu1"}),o("清空购物车")])),_:1},8,["onClick"])])),_:1}),s(T,{class:"cart-list","scroll-y":""},{default:l((()=>[s(w,{class:"wrapper"},{default:l((()=>[(e(!0),p(_,null,u(k.cart_list,((i,c)=>(e(),p(_,{key:c},[i.product_num>0?(e(),a(w,{key:0,class:"item"},{default:l((()=>[s(w,{class:"d-s-c ww100"},{default:l((()=>[s(w,{class:"cart-image"},{default:l((()=>[s(x,{style:{},src:i.image.file_path,mode:"aspectFill"},null,8,["src"])])),_:2},1024),s(w,{class:"left"},{default:l((()=>[s(w,null,{default:l((()=>[s(w,{class:"name text-ellipsis"},{default:l((()=>[o(d(i.product.product_name),1)])),_:2},1024),s(w,{class:"gray9"},{default:l((()=>[o(d(i.describe),1)])),_:2},1024)])),_:2},1024),s(w,{class:"center"},{default:l((()=>[s(b,null,{default:l((()=>[o("￥")])),_:1}),s(b,{class:"f34"},{default:l((()=>[o(d(i.price),1)])),_:2},1024),1!=k.bag_type?(e(),a(b,{key:0,class:"f24 gray9 ml10"},{default:l((()=>[o("包装费￥"+d(i.bag_price),1)])),_:2},1024)):r("",!0)])),_:2},1024)])),_:2},1024)])),_:2},1024),s(w,{class:"right"},{default:l((()=>[s(x,{onClick:t=>C.cartReduce(i),class:"btn-image",src:"/static/icon/cart/reduce-"+t.theme()+".png",mode:""},null,8,["onClick","src"]),s(w,{class:"number"},{default:l((()=>[o(d(i.product_num),1)])),_:2},1024),s(x,{onClick:t=>C.cartAdd(i),class:"btn-image",src:"/static/icon/cart/add-"+t.theme()+".png",mode:""},null,8,["onClick","src"])])),_:2},1024)])),_:2},1024)):r("",!0)],64)))),128))])),_:1})])),_:1})])),_:1})])),_:1},8,["show-pop","onCloseCallBack"])):r("",!0),k.isDetail?(e(),a(B,{key:1,productModel:k.productModel,onClose:C.closeGoodDetailModal},null,8,["productModel","onClose"])):r("",!0),k.loading?(e(),a(w,{key:2,class:"loading"},{default:l((()=>[s(x,{src:H})])),_:1})):r("",!0)])),_:1},8,["data-theme","class"])}],["__scopeId","data-v-784ce58a"]]);export{$ as default};
