import{_ as e,l as s,M as a,N as d,s as l,p as t,u as o,c as i,w as r,d as n,e as c,o as u,a as m,h,g as f,z as p,I as g,O as _,B as b,Q as y,R as x}from"./index-g5-6g3i5.js";const V=e({data:()=>({urls:"",longitude:0,latitude:0,detail:0,address_id:0,address:{name:"",phone:"",detail:"",address:""},openWb:!1,wburl:""}),onLoad(e){this.address_id=e.address_id,this.isWeixin()&&(this.urls=window.location.href),this.delta=e.delta||1,"locationPicker"==e.module?(this.address=s("addressData"),a("addressData"),this.address.detail=e.addr,this.address.latitude=e.latng.split(",")[0],this.address.longitude=e.latng.split(",")[1]):this.getData()},mounted(){},methods:{handlePostMessage(e){console.log("接收到消息："+JSON.stringify(e.detail))},getData(){let e=this,s=e.address_id;e._get("user.address/detail",{address_id:s},(function(s){e.address=s.data.detail,e.address_id=s.data.detail.address_id}))},chooseLocation(e){let s=this;d({success:function(e){s.address.longitude=e.longitude,s.address.latitude=e.latitude,s.address.detail=e.address,l("mpaddress",s.address),console.log("位置名称："+e.name),console.log("详细地址："+e.address),console.log("纬度："+e.latitude),console.log("经度："+e.longitude)},fail(e){l("address",""),console.log(e)},complete(e){console.log(e)}})},formSubmit:function(e){let s=this;var a=e.detail.value;if(a.longitude=s.address.longitude,a.latitude=s.address.latitude,a.address_id=s.address_id,""==a.name)return t({title:"请输入收货人姓名",duration:1e3,icon:"none"}),!1;o.isTelAvailable(a.phone)?s._post("user.address/edit",a,(function(e){console.log(s.delta),s.showSuccess(e.msg,(function(){history.go(-s.delta)}))})):t({title:"请输入正确的联系方式",duration:2e3,icon:"none"})},formReset:function(e){console.log("清空数据")},showMulLinkageThreePicker(){this.$refs.mpvueCityPicker.show()},onConfirm(e){this.region=e.label.split(","),this.selectCity=e.label,this.province_id=e.cityCode[0],this.city_id=e.cityCode[1],this.region_id=e.cityCode[2]}}},[["render",function(e,s,a,d,l,t){const o=p,V=g,k=c,w=_,C=b,P=y,v=x;return u(),i(k,{class:n(["address-form",e.theme()||""]),"data-theme":e.theme()},{default:r((()=>[m(P,{onSubmit:t.formSubmit,onReset:t.formReset},{default:r((()=>[m(k,{class:"bg-white p-0-30 f30"},{default:r((()=>[m(k,{class:"d-s-c border-b-d9"},{default:r((()=>[m(o,{class:"key-name"},{default:r((()=>[h("收货人")])),_:1}),m(V,{class:"ml20 f32 flex-1 p-30-0",name:"name",type:"text",modelValue:l.address.name,"onUpdate:modelValue":s[0]||(s[0]=e=>l.address.name=e),"placeholder-class":"grary9",placeholder:"请输入收货人姓名"},null,8,["modelValue"])])),_:1}),m(k,{class:"d-s-c border-b-d9"},{default:r((()=>[m(o,{class:"key-name"},{default:r((()=>[h("联系方式")])),_:1}),m(V,{class:"ml20 f32 flex-1 p-30-0",name:"phone",type:"text",modelValue:l.address.phone,"onUpdate:modelValue":s[1]||(s[1]=e=>l.address.phone=e),"placeholder-class":"grary9",placeholder:"请输入收货人手机号"},null,8,["modelValue"])])),_:1}),m(k,{class:"d-s-c border-b-d9",onClick:t.chooseLocation},{default:r((()=>[m(o,{class:"key-name"},{default:r((()=>[h("详细地址")])),_:1}),m(k,{class:"input-box flex-1"},{default:r((()=>[m(V,{class:"ml20 f32 flex-1 p-30-0",name:"detail",type:"text","placeholder-class":"grary9",placeholder:"请选择地址",modelValue:l.address.detail,"onUpdate:modelValue":s[2]||(s[2]=e=>l.address.detail=e),disabled:""},null,8,["modelValue"])])),_:1})])),_:1},8,["onClick"]),m(k,{class:"d-s-c border-b-d9"},{default:r((()=>[m(o,{class:"key-name"},{default:r((()=>[h("门牌号")])),_:1}),m(w,{class:"ml20 flex-1 f32 p-30-0 lh150",name:"address","placeholder-class":"grary9","auto-height":!0,modelValue:l.address.address,"onUpdate:modelValue":s[3]||(s[3]=e=>l.address.address=e),placeholder:"请输入街道小区楼牌号等"},null,8,["modelValue"])])),_:1})])),_:1}),m(k,{class:"p30"},{default:r((()=>[m(C,{type:"primary","form-type":"submit",class:"theme-btn f32 mt60 addBtn"},{default:r((()=>[h("保存")])),_:1})])),_:1})])),_:1},8,["onSubmit","onReset"]),l.openWb?(u(),i(v,{key:0,src:l.wburl,onOnPostMessage:t.handlePostMessage},null,8,["src","onOnPostMessage"])):f("",!0)])),_:1},8,["data-theme","class"])}],["__scopeId","data-v-995b7a58"]]);export{V as default};
