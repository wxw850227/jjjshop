import{_ as e,o as a,c as t,w as l,a as s,h as d,b as i,r as c,F as o,J as u,d as r,i as n,e as _,K as p,g as A,z as f,k as y,m,E as g,p as h,D as b,v as k,t as x}from"./index-g5-6g3i5.js";import{r as P}from"./uni-app.es.JON5rhdf.js";import{p as v}from"./pay.h_Tql9si.js";const C=e({data:()=>({checkedPay:[10,20],pay_type:10}),props:["isPayPopup"],methods:{hidePopupFunc(e){this.$emit("close",e)},payTypeFunc(e){this.pay_type=e},subFunc(){this.$emit("submit",this.pay_type)}}},[["render",function(e,y,m,g,h,b){const k=n,x=_,P=f;return a(),t(x,{class:r(m.isPayPopup?"pop-bg open cashier-pop":"pop-bg close cashier-pop"),onClick:y[2]||(y[2]=u((()=>{}),["stop"]))},{default:l((()=>[s(x,{class:"pop-content",onClick:y[1]||(y[1]=u((()=>{}),["stop"]))},{default:l((()=>[s(k,{onClick:y[0]||(y[0]=e=>b.hidePopupFunc(null)),class:"close-img",src:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACAAAAAgCAMAAABEpIrGAAAAAXNSR0IArs4c6QAAAEtQTFRFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA5mA6dAAAABh0Uk5TAC0uMDE0NjdeYWJjZGVmZ2lrbG1ucP3+sVMQoAAAAMRJREFUOMutk+sOwiAMhedtKrIxBlLe/0ktA6adLYuJ/QX9Tko4bbvuH3Ht2/kTgOf4E+C4HM4QYf7mM6YP+eg5ReJrYYeXiXKLKUuvRDFRnhWG8k3JlBrqxVD5O1kUA8ezQlU+cMYgCKhQyDVvrY4x3FSIQUtNSTVQ9JDbphO/N/qqdgQjRIwwig+k97GI9AlTvikpVqO0bGTLavvpL6Ng2k3Gwe0MjN8ZOb8tWIfW1b0Qx77uBceXxSl70V94a6X8j/EC3DIS0h2SQCgAAAAASUVORK5CYII=",mode:""}),s(x,{class:"tc f32 fb"},{default:l((()=>[d("支付方式")])),_:1}),(a(!0),i(o,null,c(h.checkedPay,((e,c)=>(a(),t(x,{key:c,class:r(["cashier-item",h.pay_type==e?"active":""]),onClick:a=>b.payTypeFunc(e)},{default:l((()=>[20==e?(a(),i(o,{key:0},[s(P,{class:"f28 gray3"},{default:l((()=>[d("微信支付")])),_:1}),s(x,{class:"icon-box d-c-c"},{default:l((()=>[p("span",{class:"icon iconfont icon-tijiaochenggong"})])),_:1})],64)):A("",!0),30==e?(a(),i(o,{key:1},[s(P,{class:"f28 gray3"},{default:l((()=>[d("支付宝支付")])),_:1}),s(x,{class:"icon-box d-c-c"},{default:l((()=>[p("span",{class:"icon iconfont icon-tijiaochenggong"})])),_:1})],64)):A("",!0),10==e?(a(),i(o,{key:2},[s(P,{class:"f28 gray3"},{default:l((()=>[d("余额支付")])),_:1}),s(x,{class:"icon-box d-c-c"},{default:l((()=>[p("span",{class:"icon iconfont icon-tijiaochenggong"})])),_:1})],64)):A("",!0)])),_:2},1032,["class","onClick"])))),128)),s(x,{class:"pay-btn",onClick:b.subFunc},{default:l((()=>[d("立即支付")])),_:1},8,["onClick"])])),_:1})])),_:1},8,["class"])}]]);const F=e({components:{cashier:C},data:()=>({checkedPay:[10,20],pay_type:20,loadding:!0,indicatorDots:!0,autoplay:!0,interval:2e3,duration:500,isPayPopup:!1,order_id:0,detail:{order_status:[],address:{region:[]},product:[],pay_type:[],delivery_type:[],pay_status:[]},extractStore:{},is_fightgroup:!1,showAlipay:!1,qrimg:""}),onLoad(e){this.order_id=e.order_id},mounted(){y({title:"加载中"}),this.getData()},methods:{getData(){let e=this,a=e.order_id;e._get("user.order/detail",{order_id:a},(function(a){e.detail=a.data.order,e.extractStore=a.data.order.extractStore,e.loadding=!1,m()}))},hidePopupFunc(){this.isPayPopup=!1},cancelOrder(e){let a=this,t=e;g({title:"提示",content:"您确定要取消当前订单吗?",success:function(e){e.confirm&&(y({title:"正在处理"}),a._get("user.order/cancel",{order_id:t},(function(e){m(),h({title:"操作成功",duration:2e3,icon:"success"}),a.getData()})))}})},orderReceipt(e){let a=this;g({title:"提示",content:"您确定要收货吗?",success:function(t){t.confirm&&(y({title:"正在处理"}),a._post("user.order/receipt",{order_id:e},(function(e){m(),h({title:e.msg,duration:2e3,icon:"success"}),a.getData()})))}})},gotoExpress(e){b({url:"/pages/order/express/express?order_id="+e})},onApplyRefund(e){b({url:"/pages/order/refund/apply/apply?order_product_id="+e})},payTypeFunc(e){this.pay_type=e},subFunc(e){let a=this;if(!a.isPayPopup)return;a.isPayPopup=!1;let t=a.order_id;y({title:"加载中"}),a._post("user.order/pay",{payType:e,order_id:t,pay_source:a.getPlatform()},(function(e){m(),v(e,a)}))},onPayOrder(e){this.isPayPopup=!0,this.order_id=e}}},[["render",function(e,p,y,m,g,h){const b=_,v=f,F=n,D=P(k("cashier"),C);return a(),t(b,{"data-theme":e.theme(),class:r(e.theme()||"")},{default:l((()=>[s(b,{class:"order-bg"}),g.loadding?A("",!0):(a(),t(b,{key:0,class:"order-box"},{default:l((()=>[s(b,{class:"f40 fb mb40 d-b-c order-box-text"},{default:l((()=>[s(b,null,{default:l((()=>[d(x(g.detail.state_text),1)])),_:1}),!g.detail.callNo||10==g.detail.pay_status.value||10!=g.detail.order_status.value&&30!=g.detail.order_status.value?A("",!0):(a(),t(b,{key:0,class:"d-c-s"},{default:l((()=>[s(b,{class:"right f68"},{default:l((()=>[d(x(g.detail.callNo),1)])),_:1}),s(b,{class:"dominant callNo-tips"},{default:l((()=>[d("取餐码")])),_:1})])),_:1}))])),_:1}),10==g.detail.pay_status.value&&20!=g.detail.order_status.value&&g.detail.pay_end_time?(a(),t(b,{key:0,class:"d-s-c mt20 mb40"},{default:l((()=>[s(b,{class:"f26"},{default:l((()=>[d("交易将在："),s(v,{class:"orange"},{default:l((()=>[d(x(g.detail.pay_end_time),1)])),_:1}),d("后关闭，请及时付款")])),_:1})])),_:1})):A("",!0),1!=g.detail.order_type&&10==g.detail.delivery_type.value&&10==g.detail.order_status.value&&g.detail.deliver_status>=1&&10!=g.detail.pay_status.value?(a(),t(b,{key:1,class:"top-state"},{default:l((()=>[s(b,{class:"d-b-c state-height border-b",onClick:e.gotoMap},{default:l((()=>[1==g.detail.deliver_status?(a(),t(b,{key:0,class:""},{default:l((()=>[d("等待骑手接单")])),_:1})):A("",!0),2==g.detail.deliver_status?(a(),t(b,{key:1,class:""},{default:l((()=>[d("骑手已接单，待取货")])),_:1})):A("",!0),3==g.detail.deliver_status?(a(),t(b,{key:2,class:""},{default:l((()=>[d("骑手正在为你配送中")])),_:1})):A("",!0),4==g.detail.deliver_status?(a(),t(b,{key:3,class:""},{default:l((()=>[d("已送达")])),_:1})):A("",!0),e.deliver_source?(a(),t(v,{key:4,class:"icon iconfont icon-jiantou1 fb",style:{"font-size":"30rpx",color:"#333"}})):A("",!0)])),_:1},8,["onClick"])])),_:1})):A("",!0),s(b,{class:"order-content"},{default:l((()=>[s(b,{class:"shop-name border-b d-b-c"},{default:l((()=>[s(F,{class:"sup_img",src:g.detail.supplier.logo||"/static/default.png",mode:"aspectFill"},null,8,["src"]),s(b,{class:"text-ellipsis f26 fb flex-1"},{default:l((()=>[d(x(g.detail.supplier.name),1)])),_:1}),g.detail.supplier?(a(),t(b,{key:0,class:"d-c-c"},{default:l((()=>[s(b,{class:"icon iconfont icon-daohang",onClick:p[0]||(p[0]=u((a=>e.openmap(g.detail.supplier.latitude,g.detail.supplier.longitude,g.detail.supplier.name,g.detail.supplier.address)),["stop"]))}),s(b,{class:"icon iconfont icon-dianhua",onClick:p[1]||(p[1]=a=>e.callPhone(g.detail.supplier.link_phone))})])),_:1})):A("",!0)])),_:1}),s(b,{class:"order-prolist"},{default:l((()=>[(a(!0),i(o,null,c(g.detail.product,((e,i)=>(a(),t(b,{class:"d-s-c proitem",key:i},{default:l((()=>[s(b,{class:"pro-image"},{default:l((()=>[s(F,{src:e.image.file_path,mode:"aspectFill"},null,8,["src"])])),_:2},1024),s(b,{class:"d-b-s pro-price flex-1"},{default:l((()=>[s(b,{class:""},{default:l((()=>[s(b,{class:"f28 text-ellipsis fb mb10"},{default:l((()=>[d(x(e.product_name),1)])),_:2},1024),s(b,{class:"f20 gray9 w-b-a"},{default:l((()=>[d(x(e.product_attr),1)])),_:2},1024),s(b,{class:"f22 gray9"},{default:l((()=>[d("x"+x(e.total_num),1)])),_:2},1024)])),_:2},1024),s(b,{class:"pro-price-item"},{default:l((()=>[s(b,{class:"f24 gray3 mb10"},{default:l((()=>[d("￥"+x(e.product_price),1)])),_:2},1024),s(b,{class:"f22 gray9 text-d-line"},{default:l((()=>[d("￥"+x(e.line_price),1)])),_:2},1024)])),_:2},1024)])),_:2},1024)])),_:2},1024)))),128))])),_:1}),s(b,null,{default:l((()=>[s(b,{class:"pro-cont-item"},{default:l((()=>[s(b,null,{default:l((()=>[d("商品小计")])),_:1}),s(b,null,{default:l((()=>[d("￥"+x(g.detail.total_price),1)])),_:1})])),_:1}),0!=g.detail.bag_price?(a(),t(b,{key:0,class:"pro-cont-item"},{default:l((()=>[s(b,null,{default:l((()=>[d("包装费")])),_:1}),s(b,null,{default:l((()=>[d("￥"+x(g.detail.bag_price),1)])),_:1})])),_:1})):A("",!0),g.detail.express_price>0?(a(),t(b,{key:1,class:"pro-cont-item"},{default:l((()=>[s(b,null,{default:l((()=>[d("配送费")])),_:1}),s(b,null,{default:l((()=>[d("￥"+x(g.detail.express_price),1)])),_:1})])),_:1})):A("",!0),s(b,{class:"pro-cont-item pro-cont-total"},{default:l((()=>[d(" 共"+x(g.detail.product.length)+"件商品 小计 ",1),s(v,null,{default:l((()=>[d("￥"+x(g.detail.pay_price),1)])),_:1})])),_:1})])),_:1})])),_:1}),s(b,{class:"other_box"},{default:l((()=>[s(b,{class:"meal_item-title"},{default:l((()=>[d("配送信息")])),_:1}),s(b,{class:"meal_item"},{default:l((()=>[s(b,null,{default:l((()=>[d("配送服务")])),_:1}),s(b,{class:"right"},{default:l((()=>[d(x(g.detail.order_type_text),1)])),_:1})])),_:1}),g.detail.mealtime?(a(),t(b,{key:0,class:"meal_item"},{default:l((()=>[s(b,null,{default:l((()=>[d("期望时间")])),_:1}),s(b,{class:"right"},{default:l((()=>[d(x(g.detail.mealtime),1)])),_:1})])),_:1})):A("",!0),1!=g.detail.order_type&&null!=g.detail.address?(a(),t(b,{key:1,class:"meal_item"},{default:l((()=>[s(b,null,{default:l((()=>[d("配送地址")])),_:1}),s(b,{class:"right"},{default:l((()=>[s(b,null,{default:l((()=>[d(x(g.detail.address.detail+g.detail.address.address),1)])),_:1}),s(b,null,{default:l((()=>[d(x(g.detail.address.name+" "+g.detail.address.phone),1)])),_:1})])),_:1})])),_:1})):A("",!0)])),_:1}),s(b,{class:"other_box"},{default:l((()=>[s(b,{class:"meal_item-title"},{default:l((()=>[d("订单信息")])),_:1}),s(b,{class:"meal_item"},{default:l((()=>[s(b,null,{default:l((()=>[d("订单号码")])),_:1}),s(b,{class:"right"},{default:l((()=>[d(x(g.detail.order_no),1)])),_:1})])),_:1}),g.detail.table_no?(a(),t(b,{key:0,class:"meal_item"},{default:l((()=>[s(b,null,{default:l((()=>[d("桌号")])),_:1}),s(b,{class:"right"},{default:l((()=>[d(x(g.detail.table_no),1)])),_:1})])),_:1})):A("",!0),s(b,{class:"meal_item"},{default:l((()=>[s(b,null,{default:l((()=>[d("下单时间")])),_:1}),s(b,{class:"right"},{default:l((()=>[d(x(g.detail.create_time),1)])),_:1})])),_:1}),10!=g.detail.pay_status.value?(a(),i(o,{key:1},[g.detail.online_money>0?(a(),t(b,{key:0,class:"meal_item"},{default:l((()=>[s(v,{class:""},{default:l((()=>[d(x(g.detail.pay_type.text),1)])),_:1}),s(v,{class:"right"},{default:l((()=>[d("¥ "+x(g.detail.online_money),1)])),_:1})])),_:1})):A("",!0),g.detail.balance>0?(a(),t(b,{key:1,class:"meal_item"},{default:l((()=>[s(v,{class:""},{default:l((()=>[d("余额支付")])),_:1}),s(v,{class:"right"},{default:l((()=>[d("¥ "+x(g.detail.balance),1)])),_:1})])),_:1})):A("",!0)],64)):A("",!0),s(b,{class:"meal_item"},{default:l((()=>[s(b,null,{default:l((()=>[d("备注")])),_:1}),s(b,{class:"right"},{default:l((()=>[s(b,null,{default:l((()=>[d(x(g.detail.buyer_remark),1)])),_:1})])),_:1})])),_:1})])),_:1}),10==g.detail.pay_status.value&&10==g.detail.order_status?(a(),t(b,{key:2,class:"d-c-c"},{default:l((()=>[s(b,{class:"f26 theme-btn pay_btn",onClick:p[2]||(p[2]=e=>h.onPayOrder(g.detail.order_id))},{default:l((()=>[d("立即支付")])),_:1})])),_:1})):A("",!0),s(D,{isPayPopup:g.isPayPopup,onClose:h.hidePopupFunc,onSubmit:h.subFunc},null,8,["isPayPopup","onClose","onSubmit"])])),_:1}))])),_:1},8,["data-theme","class"])}],["__scopeId","data-v-ea0bb94d"]]);export{F as default};
