import{_ as t,o as a,c as e,w as i,a as s,b as l,F as o,r as d,n,d as r,i as c,e as m,S as p,f as g,g as u,h as y,t as f,j as D,u as x,s as h,k as b,l as _,m as k,p as R,q as w,v as L}from"./index-g5-6g3i5.js";import{r as v}from"./uni-app.es.JON5rhdf.js";const C=t({components:{banner:t({data:()=>({indicatorDots:!0,autoplay:!0,interval:2e3,duration:500,indicatorActiveColor:"#ffffff",current:0,userInfo:{},isLogin:!1,loading:!0}),props:["itemData"],created(){this.indicatorActiveColor=this.itemData.style.btnColor},methods:{changeSwiper(t){this.current=t.detail.current},gotoPages(t){this.gotoPage(t.linkUrl)}}},[["render",function(t,u,y,f,D,x){const h=c,b=m,_=p,k=g;return a(),e(b,{class:"diy-banner-box pr rrr",style:n({background:y.itemData.style.background,paddingLeft:2*y.itemData.style.paddingLeft+"rpx",paddingRight:2*y.itemData.style.paddingLeft+"rpx",paddingTop:2*y.itemData.style.paddingTop+"rpx",paddingBottom:2*y.itemData.style.paddingBottom+"rpx",height:y.itemData.style.height+"rpx"})},{default:i((()=>[s(k,{class:"swiper o-i",autoplay:D.autoplay,interval:2e3,duration:D.duration,onChange:x.changeSwiper},{default:i((()=>[(a(!0),l(o,null,d(y.itemData.data,((c,m)=>(a(),e(_,{class:"o-i",style:n({borderRadius:2*y.itemData.style.topRadio+"rpx "+2*y.itemData.style.topRadio+"rpx "+2*y.itemData.style.bottomRadio+"rpx "+2*y.itemData.style.bottomRadio+"rpx"}),key:m,onClick:a=>t.gotoPage(c.linkUrl)},{default:i((()=>[s(h,{class:"images",style:n({borderRadius:2*y.itemData.style.topRadio+"rpx "+2*y.itemData.style.topRadio+"rpx "+2*y.itemData.style.bottomRadio+"rpx "+2*y.itemData.style.bottomRadio+"rpx"}),src:c.imgUrl,mode:"widthFix"},null,8,["style","src"]),s(b,{class:r(["swiper-dots ww100 d-c-c",y.itemData.style.imgShape])},{default:i((()=>[(a(!0),l(o,null,d(y.itemData.data,((t,i)=>(a(),e(b,{class:r(D.current==i?"swiper-dot active":"swiper-dot"),style:n("background-color:"+D.indicatorActiveColor),key:i},null,8,["class","style"])))),128))])),_:2},1032,["class"])])),_:2},1032,["style","onClick"])))),128))])),_:1},8,["autoplay","duration","onChange"])])),_:1},8,["style"])}],["__scopeId","data-v-5b112dfc"]]),windows:t({data:()=>({}),props:["itemData"],methods:{gotoPages(t){this.gotoPage(t.linkUrl)}}},[["render",function(t,p,g,y,f,D){const x=c,h=m;return a(),e(h,{class:"diy-window",style:n({background:g.itemData.style.background,padding:2*g.itemData.style.paddingTop+"rpx "+2*g.itemData.style.paddingLeft+"rpx "+2*g.itemData.style.paddingBottom+"rpx "+2*g.itemData.style.paddingLeft+"rpx"})},{default:i((()=>[g.itemData.style.layout>-1?(a(),e(h,{key:0,class:r(["data-list","column__"+g.itemData.style.layout])},{default:i((()=>[(a(!0),l(o,null,d(g.itemData.data,((t,l)=>(a(),e(h,{class:"item",key:l,onClick:a=>D.gotoPages(t)},{default:i((()=>[s(h,{class:"item-image"},{default:i((()=>[s(x,{class:"images",src:t.imgUrl,mode:"aspectFill"},null,8,["src"])])),_:2},1024)])),_:2},1032,["onClick"])))),128))])),_:1},8,["class"])):(a(),e(h,{key:1,class:"display",style:n({padding:g.itemData.style.paddingTop+"px "+g.itemData.style.paddingLeft+"px"})},{default:i((()=>[s(h,{class:"img-box-wrap-1"},{default:i((()=>[s(h,{class:"img-box",onClick:p[0]||(p[0]=t=>D.gotoPages(g.itemData.data[0]))},{default:i((()=>[s(x,{class:"images",src:g.itemData.data[0].imgUrl,mode:"aspectFill"},null,8,["src"])])),_:1})])),_:1}),s(h,{class:"percent-w50 d-s-c d-c"},{default:i((()=>[g.itemData.data.length>=2?(a(),e(h,{key:0,class:"img-box-wrap-2"},{default:i((()=>[s(h,{class:"img-box",onClick:p[1]||(p[1]=t=>D.gotoPages(g.itemData.data[1]))},{default:i((()=>[s(x,{class:"images",src:g.itemData.data[1].imgUrl,mode:"aspectFill"},null,8,["src"])])),_:1})])),_:1})):u("",!0),s(h,{class:"d-s-c img-box-wrap-3"},{default:i((()=>[g.itemData.data.length>=3?(a(),e(h,{key:0,class:"img-box-wrap-4"},{default:i((()=>[s(h,{class:"img-box",onClick:p[2]||(p[2]=t=>D.gotoPages(g.itemData.data[2]))},{default:i((()=>[s(x,{class:"images",src:g.itemData.data[2].imgUrl,mode:"aspectFill"},null,8,["src"])])),_:1})])),_:1})):u("",!0),g.itemData.data.length>=4?(a(),e(h,{key:1,class:"img-box-wrap-4"},{default:i((()=>[s(h,{class:"img-box",onClick:p[3]||(p[3]=t=>D.gotoPages(g.itemData.data[3]))},{default:i((()=>[s(x,{class:"images",src:g.itemData.data[3].imgUrl,mode:"aspectFill"},null,8,["src"])])),_:1})])),_:1})):u("",!0)])),_:1})])),_:1})])),_:1},8,["style"]))])),_:1},8,["style"])}],["__scopeId","data-v-aba7d9d7"]]),navBar:t({data:()=>({item_width:"",item_height:""}),props:["itemData"],created(){this.item_width=1==this.itemData.style.rowsNum?"690rpx":"330rpx",this.item_height=1==this.itemData.style.rowsNum?"150rpx":"254rpx"},methods:{gotoDetail(t){let a=this;console.log(t),t.startsWith("scanQrcode")?a[t]():a.gotoPage(t)},scanQrcode:function(){this.$emit("scanQrcode")}}},[["render",function(t,p,g,D,x,h){const b=m,_=c;return a(),e(b,{class:"drag optional pr",style:n({background:g.itemData.style.bgcolor,paddingLeft:2*g.itemData.style.paddingLeft+"rpx",paddingRight:2*g.itemData.style.paddingLeft+"rpx",paddingTop:2*g.itemData.style.paddingTop+"rpx",paddingBottom:2*g.itemData.style.paddingBottom+"rpx"})},{default:i((()=>[s(b,{class:"diy-navBar"},{default:i((()=>[1==g.itemData.style.rowsNum?(a(),e(b,{key:0,class:r(["list","column-"+g.itemData.style.rowsNum])},{default:i((()=>[(a(!0),l(o,null,d(g.itemData.data,((t,l)=>(a(),e(b,{class:"item",key:l,onClick:a=>h.gotoDetail(t.linkUrl),style:n({borderTopLeftRadius:2*g.itemData.style.topRadio+"rpx",borderTopRightRadius:2*g.itemData.style.topRadio+"rpx",borderBottomLeftRadius:2*g.itemData.style.bottomRadio+"rpx",borderBottomRightRadius:2*g.itemData.style.bottomRadio+"rpx",backgroundImage:"linear-gradient(to bottom, "+(g.itemData.style.background1||"#fff")+", "+(g.itemData.style.background2||"#fff")+")"})},{default:i((()=>[s(b,{class:"d-r d-b-c pl16 ww100"},{default:i((()=>[s(b,{class:"d-b-s d-c flex-1"},{default:i((()=>[s(b,{class:"title1",style:n({color:t.titlecolor})},{default:i((()=>[y(f(t.title),1)])),_:2},1032,["style"]),s(b,{class:"item-text2 text-ellipsis tl",style:n({color:t.textcolor})},{default:i((()=>[y(f(t.text),1)])),_:2},1032,["style"])])),_:2},1024),s(b,{class:"item-navimg1"},{default:i((()=>[s(_,{class:"images",src:t.imageUrl,alt:""},null,8,["src"])])),_:2},1024)])),_:2},1024)])),_:2},1032,["onClick","style"])))),128))])),_:1},8,["class"])):u("",!0),2==g.itemData.style.rowsNum?(a(),e(b,{key:1,class:r(["list","column-"+g.itemData.style.rowsNum])},{default:i((()=>[(a(!0),l(o,null,d(g.itemData.data,((t,l)=>(a(),e(b,{class:"item",key:l,onClick:a=>h.gotoDetail(t.linkUrl),style:n({borderTopLeftRadius:2*g.itemData.style.topRadio+"rpx",borderTopRightRadius:2*g.itemData.style.topRadio+"rpx",borderBottomLeftRadius:2*g.itemData.style.bottomRadio+"rpx",borderBottomRightRadius:2*g.itemData.style.bottomRadio+"rpx",backgroundImage:"linear-gradient(to bottom, "+(g.itemData.style.background1||"#fff")+", "+(g.itemData.style.background2||"#fff")+")"})},{default:i((()=>[s(b,{class:"item-navimg"},{default:i((()=>[s(_,{class:"images",src:t.imageUrl,alt:""},null,8,["src"])])),_:2},1024),s(b,{class:"item-text1 text-ellipsis tc",style:n({color:t.titlecolor})},{default:i((()=>[y(f(t.title),1)])),_:2},1032,["style"]),s(b,{class:"item-text2 text-ellipsis tc",style:n({color:t.textcolor})},{default:i((()=>[y(f(t.text),1)])),_:2},1032,["style"])])),_:2},1032,["onClick","style"])))),128))])),_:1},8,["class"])):u("",!0)])),_:1})])),_:1},8,["style"])}],["__scopeId","data-v-091e8706"]]),blank:t({data:()=>({}),props:["itemData"],methods:{}},[["render",function(t,l,o,d,r,c){const p=m;return a(),e(p,{style:n({background:o.itemData.style.bgcolor,paddingLeft:o.itemData.style.paddingLeft+"px",paddingRight:o.itemData.style.paddingLeft+"px",paddingTop:o.itemData.style.paddingTop+"px",paddingBottom:o.itemData.style.paddingBottom+"px"})},{default:i((()=>[s(p,{style:n({height:o.itemData.style.height+"px",background:o.itemData.style.background,borderTopLeftRadius:o.itemData.style.topRadio+"px",borderTopRightRadius:o.itemData.style.topRadio+"px",borderBottomLeftRadius:o.itemData.style.bottomRadio+"px",borderBottomRightRadius:o.itemData.style.bottomRadio+"px"})},null,8,["style"])])),_:1},8,["style"])}]]),guide:t({data:()=>({}),props:["itemData"],methods:{}},[["render",function(t,l,o,d,r,c){const p=m;return a(),e(p,{class:"diy-guide",style:n({background:o.itemData.style.background,paddingLeft:o.itemData.style.paddingLeft+"px",paddingRight:o.itemData.style.paddingLeft+"px",paddingTop:o.itemData.style.paddingTop+"px",paddingBottom:o.itemData.style.paddingBottom+"px"})},{default:i((()=>[s(p,{class:"line",style:n({borderTopWidth:o.itemData.style.lineHeight+"px",borderTopColor:o.itemData.style.lineColor,borderTopStyle:o.itemData.style.lineStyle})},null,8,["style"])])),_:1},8,["style"])}]]),adNav:t({data:()=>({}),props:["itemData"],created(){},methods:{gotoDetail(t){let a=this;console.log(t),t.startsWith("scanQrcode")?a[t]():a.gotoPage(t)},scanQrcode:function(){this.$emit("scanQrcode")}}},[["render",function(t,r,p,g,u,D){const x=c,h=m;return a(),e(h,{class:"pr"},{default:i((()=>[s(h,{class:"drag optional",style:n({background:p.itemData.style.bgcolor,paddingLeft:2*p.itemData.style.paddingLeft+"rpx ",paddingRight:2*p.itemData.style.paddingLeft+"rpx ",paddingTop:2*p.itemData.style.paddingTop+"rpx ",paddingBottom:2*p.itemData.style.paddingBottom+"rpx"})},{default:i((()=>[s(h,{class:"diy-navBar"},{default:i((()=>[s(h,{class:"list column-2",style:n({borderTopLeftRadius:2*p.itemData.style.topRadio+"rpx ",borderTopRightRadius:2*p.itemData.style.topRadio+"rpx ",borderBottomLeftRadius:2*p.itemData.style.bottomRadio+"rpx ",borderBottomRightRadius:2*p.itemData.style.bottomRadio+"rpx",backgroundImage:"linear-gradient(to bottom, "+(p.itemData.style.background1||"#fff")+", "+(p.itemData.style.background2||"#fff")+")"})},{default:i((()=>[(a(!0),l(o,null,d(p.itemData.data,((t,l)=>(a(),e(h,{class:"item openline",key:l,onClick:a=>D.gotoDetail(t.linkUrl)},{default:i((()=>[s(h,{class:"item-navimg"},{default:i((()=>[s(x,{class:"images",src:t.imgUrl,mode:""},null,8,["src"])])),_:2},1024),s(h,{class:"item-text1 text-ellipsis tc",style:n({color:t.titlecolor})},{default:i((()=>[y(f(t.title),1)])),_:2},1032,["style"]),s(h,{class:"item-text2 text-ellipsis tc",style:n({color:t.textcolor})},{default:i((()=>[y(f(t.text),1)])),_:2},1032,["style"])])),_:2},1032,["onClick"])))),128))])),_:1},8,["style"])])),_:1})])),_:1},8,["style"])])),_:1})}],["__scopeId","data-v-9d3f1f0d"]])},data:()=>({}),props:["diyItems"],created(){},methods:{scanQrcode(){this.$emit("scanQrcode")}}},[["render",function(t,s,n,r,c,p){const g=D("banner"),y=D("windows"),f=D("navBar"),x=D("blank"),h=D("guide"),b=D("adNav"),_=m;return a(),e(_,null,{default:i((()=>[(a(!0),l(o,null,d(n.diyItems,((t,i)=>(a(),l(o,{key:i},["banner"===t.type&&null!=t.data?(a(),e(g,{key:0,itemData:t},null,8,["itemData"])):u("",!0),"window"==t.type&&null!=t.data?(a(),e(y,{key:1,itemData:t},null,8,["itemData"])):u("",!0),"navBar"===t.type&&null!=t.data?(a(),e(f,{key:2,itemData:t,onScanQrcode:p.scanQrcode},null,8,["itemData","onScanQrcode"])):u("",!0),"blank"==t.type?(a(),e(x,{key:3,itemData:t},null,8,["itemData"])):u("",!0),"guide"==t.type?(a(),e(h,{key:4,itemData:t},null,8,["itemData"])):u("",!0),"adNav"==t.type&&null!=t.data?(a(),e(b,{key:5,itemData:t,onScanQrcode:p.scanQrcode},null,8,["itemData","onScanQrcode"])):u("",!0)],64)))),128))])),_:1})}]]);const T=t({components:{diy:C},data:()=>({user:"",loadding:!0,listData:[],urldata:"",longitude:0,latitude:0,delivery_set:[],items:[]}),mounted(){this.isWeixin()&&(this.urldata=window.location.href),this.getcityData(),this.getData()},onLoad(t){let a=x.getSceneData(t),e=t.shop_supplier_id?t.shop_supplier_id:a.sid;e&&h("selectedId",e)},onShareAppMessage(){let t=this;return{title:t.page.params.share_title,imageUrl:t.page.params.share_img,path:"/pages/index/index?"+t.getShareUrlParams()}},methods:{getData(){let t=this;b({title:"加载中"}),t._post("index/index",{url:t.urldata,longitude:t.longitude||"0",latitude:t.latitude||"0"},(function(a){h("sign",a.data.signPackage),""==_("selectedId")&&h("selectedId",a.data.supplier?a.data.supplier.shop_supplier_id:0),t.items=a.data.data.items,t.user=a.data.user,""!=t.urldata&&(t.jweixin=t.configWxScan(a.data.signPackage)),k()}))},scanQrcode:function(){let t=this;this.isWeixin()?t.jweixin.scanQRCode({needResult:1,scanType:["qrCode","barCode"],success:function(t){window.location.href=t.resultStr},error:function(t){R({title:"扫码失败，请重试"})}}):console.log("H5暂只支持公众号扫码")},getcityData(){let t=this;if(t.isWeixin()){let a=_("sign");a?t.getWxLocation(a):(b({title:"加载中"}),t._post("index/index",{url:window.location.href},(function(e){h("sign",e.data.signPackage),a=e.data.signPackage,k(),t.getWxLocation(a)})))}else t.getLocation()},onAuthorize(){let t=this;uni.openSetting({success(a){a.authSetting["scope.userLocation"]&&(t.isAuthor=!0,setTimeout((()=>{t.getLocation((t=>{}))}),1e3))}})},getLocation(t){let a=this;w({type:"wgs84",success(t){a.longitude=t.longitude,a.latitude=t.latitude,a.getData()},fail(t){a.longitude=0,a.latitude=0,R({title:"获取定位失败，请点击右下角按钮打开定位权限",duration:2e3,icon:"none"}),a.getData()}})},getWxLocation(t,a){let e=this;var i=require("jweixin-module");i.config(JSON.parse(t)),i.ready((function(t){i.getLocation({type:"wgs84",success:function(t){e.longitude=t.longitude,e.latitude=t.latitude,e.getData()},fail(t){e.longitude=0,e.latitude=0,e.getData()}})})),i.error((function(t){console.log(t)}))}}},[["render",function(t,l,o,d,n,c){const p=v(L("diy"),C),g=m;return a(),e(g,{"data-theme":t.theme(),class:r(t.theme()||"")},{default:i((()=>[s(p,{style:{position:"relative"},diyItems:n.items,onScanQrcode:c.scanQrcode},null,8,["diyItems","onScanQrcode"])])),_:1},8,["data-theme","class"])}],["__scopeId","data-v-1f2cb250"]]);export{T as default};
